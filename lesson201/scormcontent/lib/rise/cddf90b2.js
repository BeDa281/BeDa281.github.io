"use strict";(self.wpRiseJsonp=self.wpRiseJsonp||[]).push([["recorder"],{76985:(ge,z,m)=>{m.r(z),m.d(z,{startRecording:()=>me});var V=m(68185),ot=m(72467),P=m(13411),S=m(97683),st=m(48688),b=m(6056),w=m(3274);const E={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9},M={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},g={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},T={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},F={Play:0,Pause:1};var f=m(26943);function k(t){return!!t.changedTouches}function R(t){return t.composed===!0&&(0,f.XS)(t.target)?t.composedPath()[0]:t.target}const $=25;function rt(t){return Math.abs(t.pageTop-t.offsetTop-window.scrollY)>$||Math.abs(t.pageLeft-t.offsetLeft-window.scrollX)>$}const it=(t,n)=>{const e=window.visualViewport,s={layoutViewportX:t,layoutViewportY:n,visualViewportX:t,visualViewportY:n};if(e)rt(e)?(s.layoutViewportX=Math.round(t+e.offsetLeft),s.layoutViewportY=Math.round(n+e.offsetTop)):(s.visualViewportX=Math.round(t-e.offsetLeft),s.visualViewportY=Math.round(n-e.offsetTop));else return s;return s},B=t=>({scale:t.scale,offsetLeft:t.offsetLeft,offsetTop:t.offsetTop,pageLeft:t.pageLeft,pageTop:t.pageTop,height:t.height,width:t.width});var I=m(18508);function y(t,n){return{data:{source:t,...n},type:E.IncrementalSnapshot,timestamp:(0,I.nx)()}}const ut=50;function at(t,n){const{throttled:e,cancel:s}=(0,S.n)(i=>{const a=R(i),r=n.nodeIds.get(a);if(r===void 0)return;const c=H(i);if(!c)return;const u={id:r,timeOffset:0,x:c.x,y:c.y};t(y(k(i)?g.TouchMove:g.MouseMove,{positions:[u]}))},ut,{trailing:!1}),{stop:o}=(0,w.l)(n.configuration,document,["mousemove","touchmove"],e,{capture:!0,passive:!0});return{stop:()=>{o(),s()}}}function H(t){let{clientX:n,clientY:e}=k(t)?t.changedTouches[0]:t;if(window.visualViewport){const{visualViewportX:s,visualViewportY:o}=it(n,e);n=s,e=o}if(!(!Number.isFinite(n)||!Number.isFinite(e)))return{x:n,y:e}}const U={pointerup:T.MouseUp,mousedown:T.MouseDown,click:T.Click,contextmenu:T.ContextMenu,dblclick:T.DblClick,focus:T.Focus,blur:T.Blur,touchstart:T.TouchStart,touchend:T.TouchEnd};function ct(t,n){const e=s=>{const o=R(s),i=n.nodeIds.get(o);if(i===void 0||(0,f.PJ)(o,n.configuration.defaultPrivacyLevel)===f.$m.HIDDEN)return;const a=U[s.type];let r;if(a!==T.Blur&&a!==T.Focus){const c=H(s);if(!c)return;r={id:i,type:a,x:c.x,y:c.y}}else r={id:i,type:a};t({id:n.eventIds.getIdForEvent(s),...y(g.MouseInteraction,r)})};return(0,w.l)(n.configuration,document,Object.keys(U),e,{capture:!0,passive:!0})}const dt=100;function G(t,n,e){const{throttled:s,cancel:o}=(0,S.n)(a=>{const r=R(a);if(!r)return;const c=e.nodeIds.get(r);if(c===void 0||(0,f.PJ)(r,e.configuration.defaultPrivacyLevel)===f.$m.HIDDEN)return;const u=r===document?{scrollTop:(0,f.zL)(),scrollLeft:(0,f.Gn)()}:{scrollTop:Math.round(r.scrollTop),scrollLeft:Math.round(r.scrollLeft)};e.elementsScrollPositions.set(r,u),n(y(g.Scroll,{id:c,x:u.scrollLeft,y:u.scrollTop}))},dt),{stop:i}=(0,w.q)(e.configuration,t,"scroll",s,{capture:!0,passive:!0});return{stop:()=>{i(),o()}}}const lt=200;function ft(t,n){const e=(0,f.g1)(n.configuration).subscribe(s=>{t(y(g.ViewportResize,s))});return{stop:()=>{e.unsubscribe()}}}function pt(t,n){const e=window.visualViewport;if(!e)return{stop:S.l};const{throttled:s,cancel:o}=(0,S.n)(()=>{t({data:B(e),type:E.VisualViewport,timestamp:(0,I.nx)()})},lt,{trailing:!1}),{stop:i}=(0,w.l)(n.configuration,e,["resize","scroll"],s,{capture:!0,passive:!0});return{stop:()=>{i(),o()}}}function ht(t,n){return(0,w.l)(n.configuration,document,["play","pause"],e=>{const s=R(e);if(!s)return;const o=n.nodeIds.get(s);o===void 0||(0,f.PJ)(s,n.configuration.defaultPrivacyLevel)===f.$m.HIDDEN||t(y(g.MediaInteraction,{id:o,type:e.type==="play"?F.Play:F.Pause}))},{capture:!0,passive:!0})}var N=m(19930);function mt(t,n){function e(i,a){if(!i||!i.ownerNode)return;const r=n.nodeIds.get(i.ownerNode);r!==void 0&&a(r)}const s=[(0,N.H)(CSSStyleSheet.prototype,"insertRule",({target:i,parameters:[a,r]})=>{e(i,c=>t(y(g.StyleSheetRule,{id:c,adds:[{rule:a,index:r}]})))}),(0,N.H)(CSSStyleSheet.prototype,"deleteRule",({target:i,parameters:[a]})=>{e(i,r=>t(y(g.StyleSheetRule,{id:r,removes:[{index:a}]})))})];typeof CSSGroupingRule<"u"?o(CSSGroupingRule):(o(CSSMediaRule),o(CSSSupportsRule));function o(i){s.push((0,N.H)(i.prototype,"insertRule",({target:a,parameters:[r,c]})=>{e(a.parentStyleSheet,u=>{const d=J(a);d&&(d.push(c||0),t(y(g.StyleSheetRule,{id:u,adds:[{rule:r,index:d}]})))})}),(0,N.H)(i.prototype,"deleteRule",({target:a,parameters:[r]})=>{e(a.parentStyleSheet,c=>{const u=J(a);u&&(u.push(r),t(y(g.StyleSheetRule,{id:c,removes:[{index:u}]})))})}))}return{stop:()=>{s.forEach(i=>i.stop())}}}function J(t){const n=[];let e=t;for(;e.parentRule;){const a=Array.from(e.parentRule.cssRules).indexOf(e);n.unshift(a),e=e.parentRule}if(!e.parentStyleSheet)return;const o=Array.from(e.parentStyleSheet.cssRules).indexOf(e);return n.unshift(o),n}function gt(t,n){return(0,w.l)(n.configuration,window,["focus","blur"],()=>{t({data:{has_focus:document.hasFocus()},type:E.Focus,timestamp:(0,I.nx)()})})}function St(t,n,e){const s=t.subscribe(12,o=>{var i,a;o.rawRumEvent.type===f.bb.ACTION&&o.rawRumEvent.action.type===f.X2.CLICK&&(!((a=(i=o.rawRumEvent.action.frustration)===null||i===void 0?void 0:i.type)===null||a===void 0)&&a.length)&&"events"in o.domainContext&&o.domainContext.events&&o.domainContext.events.length&&n({timestamp:o.rawRumEvent.date,type:E.FrustrationRecord,data:{frustrationTypes:o.rawRumEvent.action.frustration.type,recordIds:o.domainContext.events.map(r=>e.eventIds.getIdForEvent(r))}})});return{stop:()=>{s.unsubscribe()}}}function Tt(t,n,e){const s=t.subscribe(5,()=>{e(),n({timestamp:(0,I.nx)(),type:E.ViewEnd})});return{stop:()=>{s.unsubscribe()}}}var yt=m(88716);function C(t,n){const e=t.tagName,s=t.value;if((0,f.Ie)(t,n)){const o=t.type;return e==="INPUT"&&(o==="button"||o==="submit"||o==="reset")?s:!s||e==="OPTION"?void 0:f.o}if(e==="OPTION"||e==="SELECT")return t.value;if(!(e!=="INPUT"&&e!=="TEXTAREA"))return s}const Et=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,It=/^[A-Za-z]+:|^\/\//,Nt=/^["']?data:.*,/i;function vt(t,n){return t.replace(Et,(e,s,o,i,a,r)=>{const c=o||a||r;if(!n||!c||It.test(c)||Nt.test(c))return e;const u=s||i||"";return`url(${u}${wt(c,n)}${u})`})}function wt(t,n){try{return(0,yt.c$)(t,n).href}catch{return t}}const Mt=/[^a-z1-6-_]/;function W(t){const n=t.toLowerCase().trim();return Mt.test(n)?"div":n}function X(t,n){return`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${n}' style='background-color:silver'%3E%3C/svg%3E`}function Y(t){if(!(t===void 0||t.length===0))return t.map(n=>{const e=n.cssRules||n.rules;return{cssRules:Array.from(e,i=>i.cssText),disabled:n.disabled||void 0,media:n.media.length>0?Array.from(n.media):void 0}})}var Rt=m(43775);const xt=1e6;function _(t,n,e,s){if(n===f.$m.HIDDEN)return null;const o=t.getAttribute(e),i=t.tagName;if((0,f.ap)(i,e,o,n,s)){if(i==="IMG"){const a=t;if(a.naturalWidth>0)return X(a.naturalWidth,a.naturalHeight);const{width:r,height:c}=t.getBoundingClientRect();return r>0||c>0?X(r,c):f.eT}return i==="SOURCE"?f.eT:f.o}return!o||typeof o!="string"?o:(0,f.ei)(o,xt)}function bt(t,n,e){if(n===f.$m.HIDDEN)return{};const s={},o=W(t.tagName),i=t.ownerDocument;for(let u=0;u<t.attributes.length;u+=1){const l=t.attributes.item(u).name,p=_(t,n,l,e.scope.configuration);p!==null&&(s[l]=p)}if(t.value&&(o==="textarea"||o==="select"||o==="option"||o==="input")){const u=C(t,n);u!==void 0&&(s.value=u)}if(o==="option"&&n===f.$m.ALLOW){const u=t;u.selected&&(s.selected=u.selected)}if(o==="link"){const u=Array.from(i.styleSheets).find(l=>l.href===t.href),d=D(u);d&&u&&(e.addMetric("cssText",d.length),s._cssText=d)}if(o==="style"&&t.sheet){const u=D(t.sheet);u&&(e.addMetric("cssText",u.length),s._cssText=u)}const a=t;if(o==="input"&&(a.type==="radio"||a.type==="checkbox")&&(n===f.$m.ALLOW?s.checked=!!a.checked:(0,f.Ie)(a,n)&&delete s.checked),o==="audio"||o==="video"){const u=t;s.rr_mediaState=u.paused?"paused":"played"}let r,c;switch(e.kind){case 0:r=Math.round(t.scrollTop),c=Math.round(t.scrollLeft),(r||c)&&e.scope.elementsScrollPositions.set(t,{scrollTop:r,scrollLeft:c});break;case 1:e.scope.elementsScrollPositions.has(t)&&({scrollTop:r,scrollLeft:c}=e.scope.elementsScrollPositions.get(t));break}return c&&(s.rr_scrollLeft=c),r&&(s.rr_scrollTop=r),s}function D(t){if(!t)return null;let n;try{n=t.rules||t.cssRules}catch{}if(!n)return null;const e=Array.from(n,(0,Rt.nr)()?Ct:j).join("");return vt(e,t.href)}function Ct(t){if(Lt(t)&&t.selectorText.includes(":")){const n=/(\[[\w-]+[^\\])(:[^\]]+\])/g;return t.cssText.replace(n,"$1\\$2")}return j(t)}function j(t){return Dt(t)&&D(t.styleSheet)||t.cssText}function Dt(t){return"styleSheet"in t}function Lt(t){return"selectorText"in t}function L(t,n,e){const s=Ot(t,n,e);if(!s)return null;const o=e.scope.nodeIds.assign(t),i=s;return i.id=o,e.serializedNodeIds&&e.serializedNodeIds.add(o),i}function O(t,n,e){const s=[];return(0,f.wI)(t,o=>{const i=L(o,n,e);i&&s.push(i)}),s}function Ot(t,n,e){switch(t.nodeType){case t.DOCUMENT_NODE:return At(t,n,e);case t.DOCUMENT_FRAGMENT_NODE:return zt(t,n,e);case t.DOCUMENT_TYPE_NODE:return Vt(t);case t.ELEMENT_NODE:return Pt(t,n,e);case t.TEXT_NODE:return kt(t,n);case t.CDATA_SECTION_NODE:return $t()}}function At(t,n,e){return{type:M.Document,childNodes:O(t,n,e),adoptedStyleSheets:Y(t.adoptedStyleSheets)}}function zt(t,n,e){const s=(0,f.p_)(t);return s&&e.scope.shadowRootsController.addShadowRoot(t,e.scope),{type:M.DocumentFragment,childNodes:O(t,n,e),isShadowRoot:s,adoptedStyleSheets:s?Y(t.adoptedStyleSheets):void 0}}function Vt(t){return{type:M.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId}}function Pt(t,n,e){const s=W(t.tagName),o=Ft(t)||void 0,i=(0,f.jR)((0,f.dT)(t),n);if(i===f.$m.HIDDEN){const{width:c,height:u}=t.getBoundingClientRect();return{type:M.Element,tagName:s,attributes:{rr_width:`${c}px`,rr_height:`${u}px`,[f.NT]:f.Wd},childNodes:[],isSVG:o}}if(i===f.$m.IGNORE)return;const a=bt(t,i,e);let r=[];return(0,f.wR)(t)&&s!=="style"&&(r=O(t,i,e)),{type:M.Element,tagName:s,attributes:a,childNodes:r,isSVG:o}}function Ft(t){return t.tagName==="svg"||t instanceof SVGElement}function kt(t,n){const e=(0,f.rf)(t,n);if(e!==void 0)return{type:M.Text,textContent:e}}function $t(){return{type:M.CDATA,textContent:""}}function Bt(t,n){const e=n.scope.configuration.defaultPrivacyLevel;return L(t,e,n)}function K(){return{cssText:{count:0,max:0,sum:0},serializationDuration:{count:0,max:0,sum:0}}}function Z(t,n,e){t[n].count+=1,t[n].max=Math.max(t[n].max,e),t[n].sum+=e}function Ht(t,n){for(const e of["cssText","serializationDuration"])t[e].count+=n[e].count,t[e].max=Math.max(t[e].max,n[e].max),t[e].sum+=n[e].sum}function Q(t,n,e,s,o){const i=[],a=K(),r={add:u=>{i.push(u)},addMetric:(u,d)=>{Z(a,u,d)},kind:t,scope:s},c=(0,I.nx)();o(r),Z(a,"serializationDuration",(0,I.vk)(c,(0,I.nx)()));for(const u of i)n(u);e(a)}function q(t,n,e){const s=e.configuration.defaultPrivacyLevel,o=new WeakMap,i=t!==document,{stop:a}=(0,w.l)(e.configuration,t,i?["change"]:["input","change"],d=>{const l=R(d);(l instanceof HTMLInputElement||l instanceof HTMLTextAreaElement||l instanceof HTMLSelectElement)&&c(l)},{capture:!0,passive:!0});let r;if(i)r=S.l;else{const d=[(0,N.t)(HTMLInputElement.prototype,"value",c),(0,N.t)(HTMLInputElement.prototype,"checked",c),(0,N.t)(HTMLSelectElement.prototype,"value",c),(0,N.t)(HTMLTextAreaElement.prototype,"value",c),(0,N.t)(HTMLSelectElement.prototype,"selectedIndex",c)];r=()=>{d.forEach(l=>l.stop())}}return{stop:()=>{r(),a()}};function c(d){const l=(0,f.PJ)(d,s);if(l===f.$m.HIDDEN)return;const p=d.type;let h;if(p==="radio"||p==="checkbox"){if((0,f.Ie)(d,l))return;h={isChecked:d.checked}}else{const x=C(d,l);if(x===void 0)return;h={text:x}}u(d,h);const v=d.name;p==="radio"&&v&&d.checked&&document.querySelectorAll(`input[type="radio"][name="${CSS.escape(v)}"]`).forEach(x=>{x!==d&&u(x,{isChecked:!1})})}function u(d,l){const p=e.nodeIds.get(d);if(p===void 0)return;const h=o.get(d);(!h||h.text!==l.text||h.isChecked!==l.isChecked)&&(o.set(d,l),n(y(g.Input,{id:p,...l})))}}var Ut=m(17346),Gt=m(41916);const Jt=100,Wt=16;function Xt(t){let n=S.l,e=[];function s(){n(),t(e),e=[]}const{throttled:o,cancel:i}=(0,S.n)(s,Wt,{leading:!1});return{addMutations:a=>{e.length===0&&(n=(0,Gt.BB)(o,{timeout:Jt})),e.push(...a)},flush:s,stop:()=>{n(),i()}}}function tt(t,n,e,s){const o=(0,f.W3)();if(!o)return{stop:S.l,flush:S.l};const i=Xt(r=>{Q(2,n,e,s,c=>Yt(r.concat(a.takeRecords()),c))}),a=new o((0,Ut.dm)(i.addMutations));return a.observe(t,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:()=>{a.disconnect(),i.stop()},flush:()=>{i.flush()}}}function Yt(t,n){const e=new Map;t.filter(u=>u.type==="childList").forEach(u=>{u.removedNodes.forEach(d=>{et(d,n.scope.shadowRootsController.removeShadowRoot)})});const s=t.filter(u=>u.target.isConnected&&n.scope.nodeIds.areAssignedForNodeAndAncestors(u.target)&&(0,f.PJ)(u.target,n.scope.configuration.defaultPrivacyLevel,e)!==f.$m.HIDDEN),{adds:o,removes:i,hasBeenSerialized:a}=_t(s.filter(u=>u.type==="childList"),e,n),r=jt(s.filter(u=>u.type==="characterData"&&!a(u.target)),e,n),c=Kt(s.filter(u=>u.type==="attributes"&&!a(u.target)),e,n);!r.length&&!c.length&&!i.length&&!o.length||n.add(y(g.Mutation,{adds:o,removes:i,texts:r,attributes:c}))}function _t(t,n,e){const s=new Set,o=new Map;for(const d of t)d.addedNodes.forEach(l=>{s.add(l)}),d.removedNodes.forEach(l=>{s.has(l)||o.set(l,d.target),s.delete(l)});const i=Array.from(s);Zt(i),e.serializedNodeIds=new Set;const a=[];for(const d of i){if(c(d))continue;const l=(0,f.PJ)(d.parentNode,e.scope.configuration.defaultPrivacyLevel,n);if(l===f.$m.HIDDEN||l===f.$m.IGNORE)continue;const p=L(d,l,e);if(!p)continue;const h=(0,f.$4)(d);a.push({nextId:u(d),parentId:e.scope.nodeIds.get(h),node:p})}const r=[];return o.forEach((d,l)=>{const p=e.scope.nodeIds.get(d),h=e.scope.nodeIds.get(l);p!==void 0&&h!==void 0&&r.push({parentId:p,id:h})}),{adds:a,removes:r,hasBeenSerialized:c};function c(d){var l;const p=e.scope.nodeIds.get(d);return p!==void 0&&((l=e.serializedNodeIds)===null||l===void 0?void 0:l.has(p))}function u(d){let l=d.nextSibling;for(;l;){const p=e.scope.nodeIds.get(l);if(p!==void 0)return p;l=l.nextSibling}return null}}function jt(t,n,e){var s;const o=[],i=new Set,a=t.filter(r=>i.has(r.target)?!1:(i.add(r.target),!0));for(const r of a){if(r.target.textContent===r.oldValue)continue;const u=e.scope.nodeIds.get(r.target);if(u===void 0)continue;const d=(0,f.PJ)((0,f.$4)(r.target),e.scope.configuration.defaultPrivacyLevel,n);d===f.$m.HIDDEN||d===f.$m.IGNORE||o.push({id:u,value:(s=(0,f.rf)(r.target,d))!==null&&s!==void 0?s:null})}return o}function Kt(t,n,e){const s=[],o=new Map,i=t.filter(r=>{const c=o.get(r.target);return c&&c.has(r.attributeName)?!1:(c?c.add(r.attributeName):o.set(r.target,new Set([r.attributeName])),!0)}),a=new Map;for(const r of i){if(r.target.getAttribute(r.attributeName)===r.oldValue)continue;const u=e.scope.nodeIds.get(r.target);if(u===void 0)continue;const d=(0,f.PJ)(r.target,e.scope.configuration.defaultPrivacyLevel,n),l=_(r.target,d,r.attributeName,e.scope.configuration);let p;if(r.attributeName==="value"){const v=C(r.target,d);if(v===void 0)continue;p=v}else typeof l=="string"?p=l:p=null;let h=a.get(r.target);h||(h={id:u,attributes:{}},s.push(h),a.set(r.target,h)),h.attributes[r.attributeName]=p}return s}function Zt(t){t.sort((n,e)=>{const s=n.compareDocumentPosition(e);return s&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:s&Node.DOCUMENT_POSITION_CONTAINS||s&Node.DOCUMENT_POSITION_FOLLOWING?1:s&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}function et(t,n){(0,f.XS)(t)&&n(t.shadowRoot),(0,f.wI)(t,e=>et(e,n))}function Qt(){const t=new WeakMap;return{set(n,e){n===document&&!document.scrollingElement||t.set(n===document?document.scrollingElement:n,e)},get(n){return t.get(n)},has(n){return t.has(n)}}}const qt=(t,n)=>{const e=new Map;return{addShadowRoot:(o,i)=>{if(e.has(o))return;const a=tt(o,t,n,i),r=q(o,t,i),c=G(o,t,i);e.set(o,{flush:()=>a.flush(),stop:()=>{a.stop(),r.stop(),c.stop()}})},removeShadowRoot:o=>{const i=e.get(o);i&&(i.stop(),e.delete(o))},stop:()=>{e.forEach(({stop:o})=>o())},flush:()=>{e.forEach(({flush:o})=>o())}}};function te(t,n,e,s,o){const i=(r,c)=>{Q(c,n,e,o,u=>{const{width:d,height:l}=(0,f.pB)();u.add({data:{height:l,href:window.location.href,width:d},type:E.Meta,timestamp:r}),u.add({data:{has_focus:document.hasFocus()},type:E.Focus,timestamp:r}),u.add({data:{node:Bt(document,u),initialOffset:{left:(0,f.Gn)(),top:(0,f.zL)()}},type:E.FullSnapshot,timestamp:r}),window.visualViewport&&u.add({data:B(window.visualViewport),type:E.VisualViewport,timestamp:r})})};i((0,I.nx)(),0);const{unsubscribe:a}=t.subscribe(2,r=>{s(),i(r.startClocks.timeStamp,1)});return{stop:a}}function ee(){const t=new WeakMap;let n=1;return{getIdForEvent(e){return t.has(e)||t.set(e,n++),t.get(e)}}}function ne(){const t=new WeakMap;let n=1;const e=s=>t.get(s);return{assign:s=>{let o=e(s);return o===void 0&&(o=n++,t.set(s,o)),o},get:e,areAssignedForNodeAndAncestors:s=>{let o=s;for(;o;){if(e(o)===void 0&&!(0,f.p_)(o))return!1;o=(0,f.$4)(o)}return!0}}}function oe(t,n,e,s,o){return{configuration:t,elementsScrollPositions:n,eventIds:e,nodeIds:s,shadowRootsController:o}}function se(t){const{emitRecord:n,emitStats:e,configuration:s,lifeCycle:o}=t;if(!n||!e)throw new Error("emit functions are required");const i=p=>{n(p),(0,st.b)("record",{record:p});const h=t.viewHistory.findView();b.$1(h.id)},a=qt(i,e),r=oe(s,Qt(),ee(),ne(),a),{stop:c}=te(o,i,e,u,r);function u(){a.flush(),d.flush()}const d=tt(document,i,e,r),l=[d,at(i,r),ct(i,r),G(document,i,r),ft(i,r),q(document,i,r),ht(i,r),mt(i,r),gt(i,r),pt(i,r),St(o,i,r),Tt(o,i,u)];return{stop:()=>{a.stop(),l.forEach(p=>p.stop()),c()},flushMutations:u,shadowRootsController:a}}var re=m(20750),nt=m(7573);function ie(t,n,e,s){const o=new FormData;o.append("segment",new Blob([t],{type:"application/octet-stream"}),`${n.session.id}-${n.start}`);const i={raw_segment_size:s,compressed_segment_size:t.byteLength,...n},a=JSON.stringify(i);return o.append("event",new Blob([a],{type:"application/json"})),{data:o,bytesCount:t.byteLength,cssText:e.cssText,isFullSnapshot:n.index_in_view===0,rawSize:s,recordCount:n.records_count,serializationDuration:e.serializationDuration}}function ue({context:t,creationReason:n,encoder:e}){let s=0;const o=t.view.id,i=b.K_(o),a={start:1/0,end:-1/0,creation_reason:n,records_count:0,has_full_snapshot:!1,index_in_view:i,source:"browser",...t},r=K();b.H5(o);function c(l,p){a.start=Math.min(a.start,l.timestamp),a.end=Math.max(a.end,l.timestamp),a.records_count+=1,a.has_full_snapshot||(a.has_full_snapshot=l.type===E.FullSnapshot);const h=e.isEmpty?'{"records":[':",";e.write(h+JSON.stringify(l),v=>{s+=v,p(s)})}function u(l){Ht(r,l)}function d(l){if(e.isEmpty)throw new Error("Empty segment flushed");e.write(`],${JSON.stringify(a).slice(1)}
`),e.finish(p=>{b.L7(a.view.id,p.rawBytesCount),l(a,r,p)})}return{addRecord:c,addStats:u,flush:d}}const ae=5*I.OY;let A=6e4;function ce(t,n,e,s,o,i){return de(t,()=>le(n.applicationId,e,s),o,i)}function de(t,n,e,s){let o={status:0,nextSegmentCreationReason:"init"};const{unsubscribe:i}=t.subscribe(2,()=>{r("view_change")}),{unsubscribe:a}=t.subscribe(11,c=>{r(c.reason)});function r(c){o.status===1&&(o.segment.flush((u,d,l)=>{const p=ie(l.output,u,d,l.rawBytesCount);(0,re.Kp)(c)?e.sendOnExit(p):e.send(p)}),(0,nt.DJ)(o.expirationTimeoutId)),c!=="stop"?o={status:0,nextSegmentCreationReason:c}:o={status:2}}return{addRecord:c=>{if(o.status!==2){if(o.status===0){const u=n();if(!u)return;o={status:1,segment:ue({encoder:s,context:u,creationReason:o.nextSegmentCreationReason}),expirationTimeoutId:(0,nt.wg)(()=>{r("segment_duration_limit")},ae)}}o.segment.addRecord(c,u=>{u>A&&r("segment_bytes_limit")})}},addStats:c=>{o.status===1&&o.segment.addStats(c)},stop:()=>{r("stop"),i(),a()}}}function le(t,n,e){const s=n.findTrackedSession(),o=e.findView();if(!(!s||!o))return{application:{id:t},session:{id:s.id},view:{id:o.id}}}function Se(t=6e4){A=t}function fe(t,n){if(!t.metricsEnabled)return{stop:S.l};const{unsubscribe:e}=n.subscribe(s=>{if(s.type==="failure"||s.type==="queue-full"||s.type==="success"&&s.payload.isFullSnapshot){const o=pe(s.type,s.bandwidth,s.payload);(0,V.Gk)("Segment network request metrics",{metrics:o})}});return{stop:e}}function pe(t,n,e){return{cssText:{count:e.cssText.count,max:e.cssText.max,sum:e.cssText.sum},isFullSnapshot:e.isFullSnapshot,ongoingRequests:{count:n.ongoingRequestCount,totalSize:n.ongoingByteCount},recordCount:e.recordCount,result:t,serializationDuration:{count:e.serializationDuration.count,max:e.serializationDuration.max,sum:e.serializationDuration.sum},size:{compressed:e.bytesCount,raw:e.rawSize}}}function he(t){const n=(0,P.Y9)();return{addRecord:e=>{const s=t.findView();n.send("record",e,s.id)}}}function me(t,n,e,s,o,i,a){const r=[],c=h=>{t.notify(14,{error:h}),(0,V.A2)("Error reported to customer",{"error.message":h.message})},u=a||(0,ot.sA)([n.sessionReplayEndpointBuilder],c,A);let d,l;if((0,P.d0)())({addRecord:d}=he(s)),l=S.l;else{const h=ce(t,n,e,s,u,o);d=h.addRecord,l=h.addStats,r.push(h.stop);const v=fe(i,u.observable);r.push(v.stop)}const{stop:p}=se({emitRecord:d,emitStats:l,configuration:n,lifeCycle:t,viewHistory:s});return r.push(p),{stop:()=>{r.forEach(h=>h())}}}}}]);

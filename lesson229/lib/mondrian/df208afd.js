"use strict";(self.webpackChunk_articulate_mondrian_bundles=self.webpackChunk_articulate_mondrian_bundles||[]).push([[812],{812:(t,e,i)=>{i.r(e),i.d(e,{createUpgradePath:()=>_n,getConverter:()=>Vn,getTransformSteps:()=>On,getVersionClaim:()=>Ln,upgrade:()=>Un});var n=i(2),a=i(3537),o=i(8683),l=i(6195);const r=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),d=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),u=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:d.default({value:1,unit:"px"})}),z=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),s=z.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),c=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),p=z.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:c.default({width:1,height:1,left:0,top:0})}),b=z.extend({type:l.z.literal("none")}),f=l.z.discriminatedUnion("type",[s,p,b]),m=l.z.discriminatedUnion("type",[s,b]),g=l.z.object({top:d.default({value:0,unit:"px"}),left:d.default({value:0,unit:"px"}),bottom:d.default({value:0,unit:"px"}),right:d.default({value:0,unit:"px"})}),x=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),y=x.extend({x:d.default({value:0,unit:"px"}),y:d.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:d.default({value:100,unit:"%"}),height:d.default({value:100,unit:"%"}),padding:g,fill:f,overlay:m,aspectRatioLocked:l.z.boolean(),border:u,borderRadius:l.z.object({applied:l.z.boolean().default(!1),topLeft:d.default({value:0,unit:"px"}),topRight:d.default({value:0,unit:"px"}),bottomRight:d.default({value:0,unit:"px"}),bottomLeft:d.default({value:0,unit:"px"})}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),h=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover"])}),v=h.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),j=h.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),k=l.z.discriminatedUnion("action",[v,j]),I=t=>l.z.intersection(x,t.partial()),S=t=>l.z.intersection(l.z.object({default:t}),l.z.record(I(t))),w=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:S(t),triggers:l.z.array(k),assets:l.z.record(r).default({}).optional(),removed:l.z.boolean().default(!1)}),R=(I(y),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),P=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(R).max(1)}),U=y.extend({children:l.z.array(R)}),_=w(U).extend({type:l.z.literal("group")}),O=(I(U),y.extend({altText:l.z.string().default("")})),V=w(O).extend({type:l.z.literal("image")}),L=(I(O),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>L))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),E=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:L}),C=l.z.enum(["top","middle","bottom"]),T=y.extend({text:E,textVerticalAlign:C.default("top")}),A=w(T).extend({type:l.z.literal("text")}),F=(I(T),T.extend({clipPath:l.z.literal("ellipse").nullable().default(null),altText:l.z.string().nullable().default(null)})),D=w(F).extend({type:l.z.literal("shape")}),N=(I(F),l.z.object({default:l.z.string()})),X=y.extend({videoSources:N}),q=w(X).extend({type:l.z.literal("video")}),M=(I(X),l.z.discriminatedUnion("type",[_,V,D,A,q])),Y=l.z.object({blockuments:l.z.record(P).optional(),items:l.z.record(M).optional()});var B;!function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(B||(B={}));const K=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),G=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),H=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:G.default({value:1,unit:"px"})}),J=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),Q=J.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),W=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Z=J.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:W.default({width:1,height:1,left:0,top:0})}),$=J.extend({type:l.z.literal("none")}),tt=l.z.discriminatedUnion("type",[Q,Z,$]),et=l.z.discriminatedUnion("type",[Q,$]),it=l.z.object({top:G.default({value:0,unit:"px"}),left:G.default({value:0,unit:"px"}),bottom:G.default({value:0,unit:"px"}),right:G.default({value:0,unit:"px"})}),nt=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),at=nt.extend({x:G.default({value:0,unit:"px"}),y:G.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:G.default({value:100,unit:"%"}),height:G.default({value:100,unit:"%"}),padding:it,fill:tt,overlay:et,aspectRatioLocked:l.z.boolean(),border:H,borderRadius:l.z.object({applied:l.z.boolean().default(!1),topLeft:G.default({value:0,unit:"px"}),topRight:G.default({value:0,unit:"px"}),bottomRight:G.default({value:0,unit:"px"}),bottomLeft:G.default({value:0,unit:"px"})}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),ot=t=>l.z.intersection(nt,t.partial()),lt=t=>l.z.intersection(l.z.object({default:t}),l.z.record(ot(t))),rt=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:lt(t),assets:l.z.record(K).default({}).optional(),removed:l.z.boolean().default(!1)}),dt=(ot(at),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),ut=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),zt=ut.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),st=ut.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ct=ut.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),pt=l.z.discriminatedUnion("action",[st,ct,zt]),bt=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(dt).max(1),triggers:l.z.array(pt)}),ft=at.extend({children:l.z.array(dt)}),mt=rt(ft).extend({type:l.z.literal("group")}),gt=(ot(ft),at.extend({altText:l.z.string().default("")})),xt=rt(gt).extend({type:l.z.literal("image")}),yt=(ot(gt),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>yt))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),ht=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:yt}),vt=l.z.enum(["top","middle","bottom"]),jt=at.extend({text:ht,textVerticalAlign:vt.default("top")}),kt=rt(jt).extend({type:l.z.literal("text")}),It=(ot(jt),jt.extend({clipPath:l.z.literal("ellipse").nullable().default(null),altText:l.z.string().nullable().default(null)})),St=rt(It).extend({type:l.z.literal("shape")}),wt=(ot(It),l.z.object({default:l.z.string()})),Rt=at.extend({videoSources:wt}),Pt=rt(Rt).extend({type:l.z.literal("video")}),Ut=(ot(Rt),l.z.discriminatedUnion("type",[mt,xt,St,kt,Pt])),_t=l.z.object({blockuments:l.z.record(bt).optional(),items:l.z.record(Ut).optional()});var Ot;l.z.object({id:l.z.string(),blockumentId:l.z.string(),name:l.z.string().max(128)}),function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(Ot||(Ot={}));var Vt=i(3134),Lt=i(4348);const Et=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Ct=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Tt=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Ct.default({value:1,unit:"px"})}),At=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),Ft=At.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Dt=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Nt=At.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Dt.default({width:1,height:1,left:0,top:0})}),Xt=At.extend({type:l.z.literal("none")}),qt=l.z.discriminatedUnion("type",[Ft,Nt,Xt]),Mt=l.z.discriminatedUnion("type",[Ft,Xt]),Yt=l.z.object({top:Ct.default({value:0,unit:"px"}),left:Ct.default({value:0,unit:"px"}),bottom:Ct.default({value:0,unit:"px"}),right:Ct.default({value:0,unit:"px"})}),Bt=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Kt=Bt.extend({x:Ct.default({value:0,unit:"px"}),y:Ct.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Ct.default({value:100,unit:"%"}),height:Ct.default({value:100,unit:"%"}),padding:Yt,fill:qt,overlay:Mt,aspectRatioLocked:l.z.boolean(),border:Tt,borderRadius:l.z.object({applied:l.z.boolean().default(!1),topLeft:Ct.default({value:0,unit:"px"}),topRight:Ct.default({value:0,unit:"px"}),bottomRight:Ct.default({value:0,unit:"px"}),bottomLeft:Ct.default({value:0,unit:"px"})}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),Gt=t=>l.z.intersection(Bt,t.partial()),Ht=t=>l.z.intersection(l.z.object({default:t}),l.z.record(Gt(t))),Jt=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:Ht(t),assets:l.z.record(Et).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(3)}),Qt=(Gt(Kt),l.z.object({default:l.z.string()})),Wt=Kt.extend({audioSources:Qt}),Zt=Jt(Wt).extend({type:l.z.literal("audio")}),$t=(Gt(Wt),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),te=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),ee=te.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),ie=te.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ne=te.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),ae=l.z.discriminatedUnion("action",[ie,ne,ee]),oe=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array($t).max(1),triggers:l.z.array(ae),_v:l.z.literal(3)}),le=Kt.extend({children:l.z.array($t)}),re=Jt(le).extend({type:l.z.literal("group")}),de=(Gt(le),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>de))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),ue=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:de}),ze=l.z.enum(["top","middle","bottom"]),se=Kt.extend({text:ue,textVerticalAlign:ze.default("top")}),ce=Jt(se).extend({type:l.z.literal("text")}),pe=(Gt(se),se.extend({clipPath:l.z.literal("ellipse").nullable().default(null),altText:l.z.string().nullable().default(null)})),be=Jt(pe).extend({type:l.z.literal("shape")}),fe=(Gt(pe),l.z.object({default:l.z.string()})),me=Kt.extend({videoSources:fe}),ge=Jt(me).extend({type:l.z.literal("video")}),xe=(Gt(me),l.z.discriminatedUnion("type",[Zt,re,be,ce,ge])),ye=l.z.object({blockuments:l.z.record(oe).optional(),items:l.z.record(xe).optional()});var he;l.z.object({id:l.z.string(),blockumentId:l.z.string(),name:l.z.string().max(128)}),function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(he||(he={}));var ve=i(4816);function je(t,e,i){const{default:n,...a}=t;return{default:e(n),...ve(a,i)}}function ke(t){return{...t,altText:"altText"in t?t.altText??null:void 0}}function Ie(t){return{...t,clipPath:null,altText:t.altText??null,text:{id:crypto.randomUUID(),type:"tiptap",json:{type:"doc",content:[]}},textVerticalAlign:"middle"}}function Se(t){return"image"===t.type?function(t){return{...t,_v:3,type:"shape",states:je(t.states,Ie,ke)}}(t):{...t,_v:3}}const we=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Re=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Pe=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Re.default({value:1,unit:"px"})}),Ue=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),_e=Ue.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Oe=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Ve=Ue.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Oe.default({width:1,height:1,left:0,top:0})}),Le=Ue.extend({type:l.z.literal("none")}),Ee=l.z.discriminatedUnion("type",[_e,Ve,Le]),Ce=l.z.discriminatedUnion("type",[_e,Le]),Te=l.z.object({top:Re.default({value:0,unit:"px"}),left:Re.default({value:0,unit:"px"}),bottom:Re.default({value:0,unit:"px"}),right:Re.default({value:0,unit:"px"})}),Ae=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Fe=l.z.object({type:l.z.literal("ellipse")}),De=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),Ne=l.z.object({type:l.z.literal("cloud")}),Xe=l.z.discriminatedUnion("type",[Ae,Fe,De,Ne]),qe=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Me=qe.extend({x:Re.default({value:0,unit:"px"}),y:Re.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Re.default({value:100,unit:"%"}),height:Re.default({value:100,unit:"%"}),padding:Te,fill:Ee,overlay:Ce,aspectRatioLocked:l.z.boolean(),border:Pe,clipDef:Xe.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),Ye=t=>l.z.intersection(qe,t.partial()),Be=t=>l.z.intersection(l.z.object({default:t}),l.z.record(Ye(t))),Ke=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:Be(t),assets:l.z.record(we).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(4)}),Ge=(Ye(Me),l.z.object({default:l.z.string()})),He=Me.extend({audioSources:Ge}),Je=Ke(He).extend({type:l.z.literal("audio")}),Qe=(Ye(He),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),We=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),Ze=We.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),$e=We.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ti=We.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),ei=l.z.discriminatedUnion("action",[$e,ti,Ze]),ii=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(Qe).max(1),triggers:l.z.array(ei),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(4)}),ni=Me.extend({children:l.z.array(Qe)}),ai=Ke(ni).extend({type:l.z.literal("group")}),oi=(Ye(ni),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>oi))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),li=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:oi}),ri=l.z.enum(["top","middle","bottom"]),di=Me.extend({text:li,textVerticalAlign:ri.default("top")}),ui=Ke(di).extend({type:l.z.literal("text")}),zi=(Ye(di),di.extend({altText:l.z.string().nullable().default(null)})),si=Ke(zi).extend({type:l.z.literal("shape")}),ci=(Ye(zi),l.z.object({default:l.z.string()})),pi=Me.extend({videoSources:ci}),bi=Ke(pi).extend({type:l.z.literal("video")}),fi=(Ye(pi),l.z.discriminatedUnion("type",[Je,ai,si,ui,bi])),mi=l.z.object({blockuments:l.z.record(ii).optional(),items:l.z.record(fi).optional()});function gi(t){return t.applied?{type:"rectangle",borderRadius:{topLeft:t.topLeft.value,topRight:t.topRight.value,bottomRight:t.bottomRight.value,bottomLeft:t.bottomLeft.value}}:{type:"rectangle"}}function xi(t){const{clipPath:e,borderRadius:i,...n}=t;return"ellipse"===e?{...n,clipDef:{type:"ellipse"}}:{...n,clipDef:gi(i)}}function yi(t){const{borderRadius:e,...i}=t;return{...i,clipDef:gi(e)}}function hi(t){const{borderRadius:e,...i}=t;return e?{...i,clipDef:gi(e)}:{...i}}function vi(t){if("shape"===t.type)return{...t,_v:4,states:je(t.states,xi,(e=>function(t,e){const{clipPath:i,borderRadius:n,...a}=t;return"ellipse"===i?{...a,clipDef:{type:"ellipse"}}:"ellipse"===e.clipPath?{...a}:n?{...a,clipDef:gi(n)}:{...a}}(e,t.states.default)))};if("text"===t.type)return{...t,_v:4,states:je(t.states,yi,hi)};if("video"===t.type)return{...t,_v:4,states:je(t.states,yi,hi)};if("group"===t.type)return{...t,_v:4,states:je(t.states,yi,hi)};if("audio"===t.type)return{...t,_v:4,states:je(t.states,yi,hi)};throw new Error("Internal error: should be unreachable")}l.z.object({id:l.z.string(),blockumentId:l.z.string(),name:l.z.string().max(128)});const ji=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),ki=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Ii=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:ki.default({value:1,unit:"px"})}),Si=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),wi=Si.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Ri=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Pi=Si.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Ri.default({width:1,height:1,left:0,top:0})}),Ui=Si.extend({type:l.z.literal("none")}),_i=l.z.discriminatedUnion("type",[wi,Pi,Ui]),Oi=l.z.discriminatedUnion("type",[wi,Ui]),Vi=l.z.object({top:ki.default({value:0,unit:"px"}),left:ki.default({value:0,unit:"px"}),bottom:ki.default({value:0,unit:"px"}),right:ki.default({value:0,unit:"px"})}),Li=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Ei=l.z.object({type:l.z.literal("ellipse")}),Ci=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),Ti=l.z.object({type:l.z.literal("cloud")}),Ai=l.z.object({type:l.z.literal("plus"),stroke:l.z.number().min(.01).max(1)}),Fi=l.z.object({type:l.z.literal("triangle")}),Di=l.z.object({type:l.z.literal("bookmark"),cutoutInset:l.z.number().min(0).max(.8)}),Ni=l.z.object({type:l.z.literal("chevron"),outsideCornerXCoords:l.z.number().min(.7).max(1),insideCenterXCoord:l.z.number().min(0).max(.3)}),Xi=l.z.object({type:l.z.literal("octagon")}),qi=l.z.object({type:l.z.literal("parallelogram"),shear:l.z.number().min(0).max(1)}),Mi=l.z.discriminatedUnion("type",[Di,Ni,Ti,Ei,Xi,Ai,Li,Ci,Fi,qi]),Yi=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Bi=Yi.extend({x:ki.default({value:0,unit:"px"}),y:ki.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:ki.default({value:100,unit:"%"}),height:ki.default({value:100,unit:"%"}),padding:Vi,fill:_i,overlay:Oi,aspectRatioLocked:l.z.boolean(),border:Ii,clipDef:Mi.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1),authoringAspectRatioCropLock:l.z.enum(["freeform","preset","none"])}),Ki=t=>l.z.intersection(Yi,t.partial()),Gi=t=>l.z.intersection(l.z.object({default:t}),l.z.record(Ki(t))),Hi=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:Gi(t),assets:l.z.record(ji).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(5)}),Ji=(Ki(Bi),l.z.object({default:l.z.string()})),Qi=Bi.extend({audioSources:Ji}),Wi=Hi(Qi).extend({type:l.z.literal("audio")}),Zi=(Ki(Qi),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),$i=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),tn=$i.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),en=$i.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),nn=$i.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),an=l.z.discriminatedUnion("action",[en,nn,tn]),on=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(Zi).max(1),triggers:l.z.array(an),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(5)}),ln=Bi.extend({children:l.z.array(Zi)}),rn=Hi(ln).extend({type:l.z.literal("group")}),dn=(Ki(ln),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>dn))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),un=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:dn}),zn=l.z.enum(["top","middle","bottom"]),sn=Bi.extend({text:un,textVerticalAlign:zn.default("top")}),cn=Hi(sn).extend({type:l.z.literal("text")}),pn=(Ki(sn),sn.extend({altText:l.z.string().nullable().default(null)})),bn=Hi(pn).extend({type:l.z.literal("shape")}),fn=(Ki(pn),l.z.object({default:l.z.string()})),mn=Bi.extend({videoSources:fn}),gn=Hi(mn).extend({type:l.z.literal("video")}),xn=(Ki(mn),l.z.discriminatedUnion("type",[Wi,rn,bn,cn,gn])),yn=l.z.object({blockuments:l.z.record(on).optional(),items:l.z.record(xn).optional()}),hn=(l.z.object({id:l.z.string(),blockumentId:l.z.string(),name:l.z.string().max(128)}),{authoringAspectRatioCropLock:"none"});function vn(t){return{...t,...hn}}function jn(t){const e=null!=t.width||null!=t.height?hn:null;return{...t,...e}}function kn(t){if("shape"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("text"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("video"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("audio"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("group"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};throw new Error("Unexpected item type!")}var In=i(587),Sn=i(9378);function wn(t){return"text"===t.type?{...t,_v:6,states:je(t.states,(t=>({...t,textPadding:Sn.un})),(t=>t))}:"shape"===t.type?{...t,_v:6,states:je(t.states,(t=>({...t,textPadding:Sn.Mw})),(t=>t))}:{...t,_v:6}}const Rn=6,Pn=[{version:1,upgrade:function(t){return t},InputSchema:Y,OutputSchema:Y},{version:2,upgrade:function({blockuments:t,items:e}){const i=t??{},n=Object.values(e??{}).filter((t=>"triggers"in t)),a=Vt(n,"blockumentId"),o={},l={};for(const[t,e]of Object.entries(a)){const n=i[t];if(n){const t=e.flatMap((t=>(t.triggers??[]).map((e=>({...e,sourceId:t.id}))))),a={...n,triggers:t};o[a.id]=a,e.forEach((t=>{l[t.id]=Lt(t,"triggers")})),Object.entries(i).forEach((([t,e])=>{if(!(t in o)){const i={...e,triggers:[]};o[t]=i}}))}}return{blockuments:o,items:l}},InputSchema:Y,OutputSchema:_t},{version:3,upgrade:function({blockuments:t,items:e}){return{blockuments:ve(t??{},(t=>({...t,_v:3}))),items:ve(e??{},Se)}},InputSchema:_t,OutputSchema:ye},{version:4,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:4}))),items:ve(t.items??{},vi)}},InputSchema:ye,OutputSchema:mi},{version:5,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:5}))),items:ve(t.items??{},kn)}},InputSchema:mi,OutputSchema:yn},{version:6,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:6}))),items:ve(t.items??{},wn)}},InputSchema:yn,OutputSchema:In.pL}];function Un(t){const e=Ln(t),i=Vn(e).OutputSchema.safeParse(t);if(i.success&&e===Rn)return i.data;if(i.success)return _n(e,Rn)(i.data);throw new Error("Unable to comply: no upgrade path was found",{cause:i.error})}function _n(t,e){return n(On(t,e).map((({InputSchema:t,upgrade:e,OutputSchema:i})=>n(t.parse,e,i.parse))))}function On(t,e){const i=a(t+1,e+1),n=Pn.filter((({version:t})=>i.includes(t)));return o(n,"version")}function Vn(t){const e=Pn.find((e=>e.version===t));if(!e)throw new Error("No converter found for claimed version");return e}function Ln(t){const e=t;let i=Object.values(e?.blockuments??{})[0]?._v??0;return 0===i&&(i=Object.values(e.blockuments).every((t=>t.triggers))?2:1),i}}}]);
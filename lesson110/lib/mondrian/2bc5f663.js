"use strict";(self.webpackChunk_articulate_mondrian_bundles=self.webpackChunk_articulate_mondrian_bundles||[]).push([[896],{4515:(t,e,i)=>{i.r(e),i.d(e,{createUpgradePath:()=>La,getConverter:()=>Ca,getTransformSteps:()=>Ea,getVersionClaim:()=>Ta,upgrade:()=>Oa});var n=i(2),a=i(3537),o=i(8683),l=i(6195);const r=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),d=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),z=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:d.default({value:1,unit:"px"})}),u=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),s=u.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),c=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),p=u.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:c.default({width:1,height:1,left:0,top:0})}),b=u.extend({type:l.z.literal("none")}),m=l.z.discriminatedUnion("type",[s,p,b]),f=l.z.discriminatedUnion("type",[s,b]),g=l.z.object({top:d.default({value:0,unit:"px"}),left:d.default({value:0,unit:"px"}),bottom:d.default({value:0,unit:"px"}),right:d.default({value:0,unit:"px"})}),x=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),y=x.extend({x:d.default({value:0,unit:"px"}),y:d.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:d.default({value:100,unit:"%"}),height:d.default({value:100,unit:"%"}),padding:g,fill:m,overlay:f,aspectRatioLocked:l.z.boolean(),border:z,borderRadius:l.z.object({applied:l.z.boolean().default(!1),topLeft:d.default({value:0,unit:"px"}),topRight:d.default({value:0,unit:"px"}),bottomRight:d.default({value:0,unit:"px"}),bottomLeft:d.default({value:0,unit:"px"})}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),h=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover"])}),v=h.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),j=h.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),k=l.z.discriminatedUnion("action",[v,j]),I=t=>l.z.intersection(x,t.partial()),S=t=>l.z.intersection(l.z.object({default:t}),l.z.record(I(t))),w=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:S(t),triggers:l.z.array(k),assets:l.z.record(r).default({}).optional(),removed:l.z.boolean().default(!1)}),P=(I(y),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),R=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(P).max(1)}),U=y.extend({children:l.z.array(P)}),_=w(U).extend({type:l.z.literal("group")}),V=(I(U),y.extend({altText:l.z.string().default("")})),O=w(V).extend({type:l.z.literal("image")}),L=(I(V),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>L))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),E=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:L}),C=l.z.enum(["top","middle","bottom"]),T=y.extend({text:E,textVerticalAlign:C.default("top")}),A=w(T).extend({type:l.z.literal("text")}),F=(I(T),T.extend({clipPath:l.z.literal("ellipse").nullable().default(null),altText:l.z.string().nullable().default(null)})),D=w(F).extend({type:l.z.literal("shape")}),N=(I(F),l.z.object({default:l.z.string()})),X=y.extend({videoSources:N}),q=w(X).extend({type:l.z.literal("video")}),Y=(I(X),l.z.discriminatedUnion("type",[_,O,D,A,q])),M=l.z.object({blockuments:l.z.record(R).optional(),items:l.z.record(Y).optional()});var B;!function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(B||(B={}));const K=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),G=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),H=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:G.default({value:1,unit:"px"})}),J=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),Q=J.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),W=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Z=J.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:W.default({width:1,height:1,left:0,top:0})}),$=J.extend({type:l.z.literal("none")}),tt=l.z.discriminatedUnion("type",[Q,Z,$]),et=l.z.discriminatedUnion("type",[Q,$]),it=l.z.object({top:G.default({value:0,unit:"px"}),left:G.default({value:0,unit:"px"}),bottom:G.default({value:0,unit:"px"}),right:G.default({value:0,unit:"px"})}),nt=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),at=nt.extend({x:G.default({value:0,unit:"px"}),y:G.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:G.default({value:100,unit:"%"}),height:G.default({value:100,unit:"%"}),padding:it,fill:tt,overlay:et,aspectRatioLocked:l.z.boolean(),border:H,borderRadius:l.z.object({applied:l.z.boolean().default(!1),topLeft:G.default({value:0,unit:"px"}),topRight:G.default({value:0,unit:"px"}),bottomRight:G.default({value:0,unit:"px"}),bottomLeft:G.default({value:0,unit:"px"})}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),ot=t=>l.z.intersection(nt,t.partial()),lt=t=>l.z.intersection(l.z.object({default:t}),l.z.record(ot(t))),rt=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:lt(t),assets:l.z.record(K).default({}).optional(),removed:l.z.boolean().default(!1)}),dt=(ot(at),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),zt=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),ut=zt.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),st=zt.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ct=zt.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),pt=l.z.discriminatedUnion("action",[st,ct,ut]),bt=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(dt).max(1),triggers:l.z.array(pt)}),mt=at.extend({children:l.z.array(dt)}),ft=rt(mt).extend({type:l.z.literal("group")}),gt=(ot(mt),at.extend({altText:l.z.string().default("")})),xt=rt(gt).extend({type:l.z.literal("image")}),yt=(ot(gt),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>yt))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),ht=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:yt}),vt=l.z.enum(["top","middle","bottom"]),jt=at.extend({text:ht,textVerticalAlign:vt.default("top")}),kt=rt(jt).extend({type:l.z.literal("text")}),It=(ot(jt),jt.extend({clipPath:l.z.literal("ellipse").nullable().default(null),altText:l.z.string().nullable().default(null)})),St=rt(It).extend({type:l.z.literal("shape")}),wt=(ot(It),l.z.object({default:l.z.string()})),Pt=at.extend({videoSources:wt}),Rt=rt(Pt).extend({type:l.z.literal("video")}),Ut=(ot(Pt),l.z.discriminatedUnion("type",[ft,xt,St,kt,Rt])),_t=l.z.object({blockuments:l.z.record(bt).optional(),items:l.z.record(Ut).optional()});var Vt;l.z.object({id:l.z.string(),blockumentId:l.z.string(),name:l.z.string().max(128)}),function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(Vt||(Vt={}));var Ot=i(3134),Lt=i(4348);const Et=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Ct=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Tt=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Ct.default({value:1,unit:"px"})}),At=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),Ft=At.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Dt=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Nt=At.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Dt.default({width:1,height:1,left:0,top:0})}),Xt=At.extend({type:l.z.literal("none")}),qt=l.z.discriminatedUnion("type",[Ft,Nt,Xt]),Yt=l.z.discriminatedUnion("type",[Ft,Xt]),Mt=l.z.object({top:Ct.default({value:0,unit:"px"}),left:Ct.default({value:0,unit:"px"}),bottom:Ct.default({value:0,unit:"px"}),right:Ct.default({value:0,unit:"px"})}),Bt=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Kt=Bt.extend({x:Ct.default({value:0,unit:"px"}),y:Ct.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Ct.default({value:100,unit:"%"}),height:Ct.default({value:100,unit:"%"}),padding:Mt,fill:qt,overlay:Yt,aspectRatioLocked:l.z.boolean(),border:Tt,borderRadius:l.z.object({applied:l.z.boolean().default(!1),topLeft:Ct.default({value:0,unit:"px"}),topRight:Ct.default({value:0,unit:"px"}),bottomRight:Ct.default({value:0,unit:"px"}),bottomLeft:Ct.default({value:0,unit:"px"})}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),Gt=t=>l.z.intersection(Bt,t.partial()),Ht=t=>l.z.intersection(l.z.object({default:t}),l.z.record(Gt(t))),Jt=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:Ht(t),assets:l.z.record(Et).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(3)}),Qt=(Gt(Kt),l.z.object({default:l.z.string()})),Wt=Kt.extend({audioSources:Qt}),Zt=Jt(Wt).extend({type:l.z.literal("audio")}),$t=(Gt(Wt),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),te=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),ee=te.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),ie=te.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ne=te.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),ae=l.z.discriminatedUnion("action",[ie,ne,ee]),oe=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array($t).max(1),triggers:l.z.array(ae),_v:l.z.literal(3)}),le=Kt.extend({children:l.z.array($t)}),re=Jt(le).extend({type:l.z.literal("group")}),de=(Gt(le),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>de))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),ze=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:de}),ue=l.z.enum(["top","middle","bottom"]),se=Kt.extend({text:ze,textVerticalAlign:ue.default("top")}),ce=Jt(se).extend({type:l.z.literal("text")}),pe=(Gt(se),se.extend({clipPath:l.z.literal("ellipse").nullable().default(null),altText:l.z.string().nullable().default(null)})),be=Jt(pe).extend({type:l.z.literal("shape")}),me=(Gt(pe),l.z.object({default:l.z.string()})),fe=Kt.extend({videoSources:me}),ge=Jt(fe).extend({type:l.z.literal("video")}),xe=(Gt(fe),l.z.discriminatedUnion("type",[Zt,re,be,ce,ge])),ye=l.z.object({blockuments:l.z.record(oe).optional(),items:l.z.record(xe).optional()});var he;l.z.object({id:l.z.string(),blockumentId:l.z.string(),name:l.z.string().max(128)}),function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(he||(he={}));var ve=i(4816);function je(t,e,i){const{default:n,...a}=t;return{default:e(n),...ve(a,i)}}function ke(t){return{...t,altText:"altText"in t?t.altText??null:void 0}}function Ie(t){return{...t,clipPath:null,altText:t.altText??null,text:{id:crypto.randomUUID(),type:"tiptap",json:{type:"doc",content:[]}},textVerticalAlign:"middle"}}function Se(t){return"image"===t.type?function(t){return{...t,_v:3,type:"shape",states:je(t.states,Ie,ke)}}(t):{...t,_v:3}}const we=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Pe=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Re=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Pe.default({value:1,unit:"px"})}),Ue=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),_e=Ue.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Ve=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Oe=Ue.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Ve.default({width:1,height:1,left:0,top:0})}),Le=Ue.extend({type:l.z.literal("none")}),Ee=l.z.discriminatedUnion("type",[_e,Oe,Le]),Ce=l.z.discriminatedUnion("type",[_e,Le]),Te=l.z.object({top:Pe.default({value:0,unit:"px"}),left:Pe.default({value:0,unit:"px"}),bottom:Pe.default({value:0,unit:"px"}),right:Pe.default({value:0,unit:"px"})}),Ae=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Fe=l.z.object({type:l.z.literal("ellipse")}),De=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),Ne=l.z.object({type:l.z.literal("cloud")}),Xe=l.z.discriminatedUnion("type",[Ae,Fe,De,Ne]),qe=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Ye=qe.extend({x:Pe.default({value:0,unit:"px"}),y:Pe.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Pe.default({value:100,unit:"%"}),height:Pe.default({value:100,unit:"%"}),padding:Te,fill:Ee,overlay:Ce,aspectRatioLocked:l.z.boolean(),border:Re,clipDef:Xe.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1)}),Me=t=>l.z.intersection(qe,t.partial()),Be=t=>l.z.intersection(l.z.object({default:t}),l.z.record(Me(t))),Ke=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:Be(t),assets:l.z.record(we).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(4)}),Ge=(Me(Ye),l.z.object({default:l.z.string()})),He=Ye.extend({audioSources:Ge}),Je=Ke(He).extend({type:l.z.literal("audio")}),Qe=(Me(He),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),We=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),Ze=We.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),$e=We.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ti=We.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),ei=l.z.discriminatedUnion("action",[$e,ti,Ze]),ii=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(Qe).max(1),triggers:l.z.array(ei),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(4)}),ni=Ye.extend({children:l.z.array(Qe)}),ai=Ke(ni).extend({type:l.z.literal("group")}),oi=(Me(ni),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>oi))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),li=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:oi}),ri=l.z.enum(["top","middle","bottom"]),di=Ye.extend({text:li,textVerticalAlign:ri.default("top")}),zi=Ke(di).extend({type:l.z.literal("text")}),ui=(Me(di),di.extend({altText:l.z.string().nullable().default(null)})),si=Ke(ui).extend({type:l.z.literal("shape")}),ci=(Me(ui),l.z.object({default:l.z.string()})),pi=Ye.extend({videoSources:ci}),bi=Ke(pi).extend({type:l.z.literal("video")}),mi=(Me(pi),l.z.discriminatedUnion("type",[Je,ai,si,zi,bi])),fi=l.z.object({blockuments:l.z.record(ii).optional(),items:l.z.record(mi).optional()});function gi(t){return t.applied?{type:"rectangle",borderRadius:{topLeft:t.topLeft.value,topRight:t.topRight.value,bottomRight:t.bottomRight.value,bottomLeft:t.bottomLeft.value}}:{type:"rectangle"}}function xi(t){const{clipPath:e,borderRadius:i,...n}=t;return"ellipse"===e?{...n,clipDef:{type:"ellipse"}}:{...n,clipDef:gi(i)}}function yi(t){const{borderRadius:e,...i}=t;return{...i,clipDef:gi(e)}}function hi(t){const{borderRadius:e,...i}=t;return e?{...i,clipDef:gi(e)}:{...i}}function vi(t){if("shape"===t.type)return{...t,_v:4,states:je(t.states,xi,(e=>function(t,e){const{clipPath:i,borderRadius:n,...a}=t;return"ellipse"===i?{...a,clipDef:{type:"ellipse"}}:"ellipse"===e.clipPath?{...a}:n?{...a,clipDef:gi(n)}:{...a}}(e,t.states.default)))};if("text"===t.type)return{...t,_v:4,states:je(t.states,yi,hi)};if("video"===t.type)return{...t,_v:4,states:je(t.states,yi,hi)};if("group"===t.type)return{...t,_v:4,states:je(t.states,yi,hi)};if("audio"===t.type)return{...t,_v:4,states:je(t.states,yi,hi)};throw new Error("Internal error: should be unreachable")}l.z.object({id:l.z.string(),blockumentId:l.z.string(),name:l.z.string().max(128)});const ji=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),ki=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),Ii=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:ki.default({value:1,unit:"px"})}),Si=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),wi=Si.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Pi=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),Ri=Si.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Pi.default({width:1,height:1,left:0,top:0})}),Ui=Si.extend({type:l.z.literal("none")}),_i=l.z.discriminatedUnion("type",[wi,Ri,Ui]),Vi=l.z.discriminatedUnion("type",[wi,Ui]),Oi=l.z.object({top:ki.default({value:0,unit:"px"}),left:ki.default({value:0,unit:"px"}),bottom:ki.default({value:0,unit:"px"}),right:ki.default({value:0,unit:"px"})}),Li=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Ei=l.z.object({type:l.z.literal("ellipse")}),Ci=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),Ti=l.z.object({type:l.z.literal("cloud")}),Ai=l.z.object({type:l.z.literal("plus"),stroke:l.z.number().min(.01).max(1)}),Fi=l.z.object({type:l.z.literal("triangle")}),Di=l.z.object({type:l.z.literal("bookmark"),cutoutInset:l.z.number().min(0).max(.8)}),Ni=l.z.object({type:l.z.literal("chevron"),outsideCornerXCoords:l.z.number().min(.7).max(1),insideCenterXCoord:l.z.number().min(0).max(.3)}),Xi=l.z.object({type:l.z.literal("octagon")}),qi=l.z.object({type:l.z.literal("parallelogram"),shear:l.z.number().min(0).max(1)}),Yi=l.z.discriminatedUnion("type",[Di,Ni,Ti,Ei,Xi,Ai,Li,Ci,Fi,qi]),Mi=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Bi=Mi.extend({x:ki.default({value:0,unit:"px"}),y:ki.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:ki.default({value:100,unit:"%"}),height:ki.default({value:100,unit:"%"}),padding:Oi,fill:_i,overlay:Vi,aspectRatioLocked:l.z.boolean(),border:Ii,clipDef:Yi.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1),authoringAspectRatioCropLock:l.z.enum(["freeform","preset","none"])}),Ki=t=>l.z.intersection(Mi,t.partial()),Gi=t=>l.z.intersection(l.z.object({default:t}),l.z.record(Ki(t))),Hi=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:Gi(t),assets:l.z.record(ji).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(5)}),Ji=(Ki(Bi),l.z.object({default:l.z.string()})),Qi=Bi.extend({audioSources:Ji}),Wi=Hi(Qi).extend({type:l.z.literal("audio")}),Zi=(Ki(Qi),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),$i=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),tn=$i.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),en=$i.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),nn=$i.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),an=l.z.discriminatedUnion("action",[en,nn,tn]),on=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(Zi).max(1),triggers:l.z.array(an),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(5)}),ln=Bi.extend({children:l.z.array(Zi)}),rn=Hi(ln).extend({type:l.z.literal("group")}),dn=(Ki(ln),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>dn))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),zn=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:dn}),un=l.z.enum(["top","middle","bottom"]),sn=Bi.extend({text:zn,textVerticalAlign:un.default("top")}),cn=Hi(sn).extend({type:l.z.literal("text")}),pn=(Ki(sn),sn.extend({altText:l.z.string().nullable().default(null)})),bn=Hi(pn).extend({type:l.z.literal("shape")}),mn=(Ki(pn),l.z.object({default:l.z.string()})),fn=Bi.extend({videoSources:mn}),gn=Hi(fn).extend({type:l.z.literal("video")}),xn=(Ki(fn),l.z.discriminatedUnion("type",[Wi,rn,bn,cn,gn])),yn=l.z.object({blockuments:l.z.record(on).optional(),items:l.z.record(xn).optional()}),hn=(l.z.object({id:l.z.string(),blockumentId:l.z.string(),name:l.z.string().max(128)}),{authoringAspectRatioCropLock:"none"});function vn(t){return{...t,...hn}}function jn(t){const e=null!=t.width||null!=t.height?hn:null;return{...t,...e}}function kn(t){if("shape"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("text"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("video"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("audio"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};if("group"===t.type)return{...t,_v:5,states:je(t.states,vn,jn)};throw new Error("Unexpected item type!")}const In=l.z.object({id:l.z.string(),path:l.z.string(),name:l.z.string(),width:l.z.number().optional(),height:l.z.number().optional()}),Sn=l.z.object({unit:l.z.enum(["px","%","auto","fr"]),value:l.z.number()}),wn=l.z.object({applied:l.z.boolean().default(!1),type:l.z.enum(["none","fill"]).default("none"),color:l.z.string().default("#000000"),opacity:l.z.number().default(1),style:l.z.enum(["solid","dashed","dotted"]).default("solid"),width:Sn.default({value:1,unit:"px"})}),Pn=l.z.object({assetId:l.z.string().optional(),color:l.z.string().optional(),opacity:l.z.number().min(0).max(1).default(1)}),Rn=Pn.extend({type:l.z.literal("color"),color:l.z.string().default("#e4e4e4")}),Un=l.z.object({width:l.z.number(),height:l.z.number(),left:l.z.number(),top:l.z.number()}),_n=Pn.extend({type:l.z.literal("image"),assetId:l.z.string(),crop:Un.default({width:1,height:1,left:0,top:0})}),Vn=Pn.extend({type:l.z.literal("none")}),On=l.z.discriminatedUnion("type",[Rn,_n,Vn]),Ln=l.z.discriminatedUnion("type",[Rn,Vn]),En=l.z.object({top:Sn.default({value:0,unit:"px"}),left:Sn.default({value:0,unit:"px"}),bottom:Sn.default({value:0,unit:"px"}),right:Sn.default({value:0,unit:"px"})}),Cn=l.z.object({type:l.z.literal("rectangle"),borderRadius:l.z.object({topLeft:l.z.number(),topRight:l.z.number(),bottomRight:l.z.number(),bottomLeft:l.z.number()}).optional()}),Tn=l.z.object({type:l.z.literal("ellipse")}),An=l.z.object({type:l.z.literal("star"),sidePairs:l.z.number().min(3),innerRadius:l.z.number().min(.1).max(1)}),Fn=l.z.object({type:l.z.literal("cloud")}),Dn=l.z.object({type:l.z.literal("plus"),stroke:l.z.number().min(.01).max(1)}),Nn=l.z.object({type:l.z.literal("triangle"),topVertex:l.z.number().min(0).max(1).optional()}),Xn=l.z.object({type:l.z.literal("bookmark"),cutoutInset:l.z.number().min(0).max(.8)}),qn=l.z.object({type:l.z.literal("chevron"),outsideCornerXCoords:l.z.number().min(.7).max(1),insideCenterXCoord:l.z.number().min(0).max(.3)}),Yn=l.z.object({type:l.z.literal("octagon")}),Mn=l.z.object({type:l.z.literal("parallelogram"),shear:l.z.number().min(0).max(1)}),Bn=l.z.object({type:l.z.literal("shield")}),Kn=l.z.object({type:l.z.literal("speechBubble")}),Gn=l.z.object({type:l.z.literal("arrow"),thickness:l.z.number().min(.1).max(.5),headLength:l.z.number().min(.1).max(.9)}),Hn=l.z.discriminatedUnion("type",[Xn,qn,Fn,Tn,Yn,Dn,Cn,An,Nn,Mn,Bn,Kn,Gn]),Jn=l.z.object({id:l.z.string(),name:l.z.string().max(128)}),Qn=Jn.extend({x:Sn.default({value:0,unit:"px"}),y:Sn.default({value:0,unit:"px"}),xOffset:l.z.number().default(0),yOffset:l.z.number().default(0),position:l.z.literal("absolute").default("absolute"),width:Sn.default({value:100,unit:"%"}),height:Sn.default({value:100,unit:"%"}),padding:En,fill:On,overlay:Ln,aspectRatioLocked:l.z.boolean(),border:wn,clipDef:Hn.default({type:"rectangle"}),rotation:l.z.number().default(0),flipX:l.z.boolean().default(!1),flipY:l.z.boolean().default(!1),authoringAspectRatioCropLock:l.z.enum(["freeform","preset","none"])}),Wn=t=>l.z.intersection(Jn,t.partial()),Zn=t=>l.z.intersection(l.z.object({default:t}),l.z.record(Wn(t))),$n=t=>l.z.object({id:l.z.string(),blockumentId:l.z.string(),clonedFromId:l.z.string().optional(),parentId:l.z.string(),type:l.z.string(),name:l.z.string().max(128),tagName:l.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:l.z.boolean().default(!1),authoringVisible:l.z.boolean().default(!0),initialVisible:l.z.boolean().default(!0),initialState:l.z.string().default("default"),states:Zn(t),assets:l.z.record(In).default({}).optional(),removed:l.z.boolean().default(!1),_v:l.z.literal(6)}),ta=(Wn(Qn),l.z.object({default:l.z.string()})),ea=Qn.extend({audioSources:ta}),ia=$n(ea).extend({type:l.z.literal("audio")}),na=(Wn(ea),l.z.object({id:l.z.string(),clonedFromId:l.z.string().optional(),state:l.z.string(),visible:l.z.boolean()})),aa=l.z.object({id:l.z.string(),event:l.z.enum(["click","hover","mediaPlay","mediaPause","mediaEnd"]),sourceId:l.z.string().optional()}),oa=aa.extend({action:l.z.enum(["mediaPause","mediaPlay","mediaEnd"]),targetId:l.z.string()}),la=aa.extend({action:l.z.literal("changeState"),targetId:l.z.string(),targetState:l.z.string().default("default")}),ra=aa.extend({action:l.z.literal("changeVisibility"),targetId:l.z.string(),targetVisibility:l.z.boolean()}),da=l.z.discriminatedUnion("action",[la,ra,oa]),za=l.z.object({id:l.z.string(),title:l.z.string().max(255),children:l.z.array(na).max(1),triggers:l.z.array(da),fonts:l.z.record(l.z.string()).optional(),_v:l.z.literal(6)}),ua=Qn.extend({children:l.z.array(na)}),sa=$n(ua).extend({type:l.z.literal("group")}),ca=(Wn(ua),l.z.intersection(l.z.object({type:l.z.string().optional(),attrs:l.z.record(l.z.any()).optional(),content:l.z.array(l.z.lazy((()=>ca))).optional(),marks:l.z.array(l.z.intersection(l.z.object({type:l.z.string(),attrs:l.z.record(l.z.any()).optional()}),l.z.record(l.z.any()))).optional(),text:l.z.string().optional()}),l.z.record(l.z.any()))),pa=l.z.object({id:l.z.string(),type:l.z.literal("tiptap"),json:ca}),ba=l.z.enum(["top","middle","bottom"]),ma=l.z.object({top:l.z.number(),left:l.z.number(),bottom:l.z.number(),right:l.z.number()}),fa=Qn.extend({text:pa,textVerticalAlign:ba.default("top"),textPadding:ma}),ga=$n(fa).extend({type:l.z.literal("text")}),xa=(Wn(fa),fa.extend({altText:l.z.string().nullable().default(null)})),ya=$n(xa).extend({type:l.z.literal("shape")}),ha=(Wn(xa),l.z.object({default:l.z.string()})),va=Qn.extend({videoSources:ha}),ja=$n(va).extend({type:l.z.literal("video")}),ka=(Wn(va),l.z.discriminatedUnion("type",[ia,sa,ya,ga,ja])),Ia=l.z.object({blockuments:l.z.record(za).optional(),items:l.z.record(ka).optional()});l.z.object({id:l.z.string(),blockumentId:l.z.string(),name:l.z.string().max(128)});var Sa=i(9378);function wa(t){return"text"===t.type?{...t,_v:6,states:je(t.states,(t=>({...t,textPadding:Sa.un})),(t=>t))}:"shape"===t.type?{...t,_v:6,states:je(t.states,(t=>({...t,textPadding:Sa.Mw})),(t=>t))}:{...t,_v:6}}var Pa=i(4526);function Ra(t,e){const i=e.width?.value??t.width.value,n=i<=100?8:i>300?32:16;return{top:16,left:n,bottom:16,right:n}}function Ua(t){return"shape"===t.type?{...t,states:(e=t.states,je(e,(t=>({...t,textPadding:Ra(t,t)})),(t=>t.textPadding||t.width?{...t,textPadding:Ra(e.default,t)}:t))),_v:7}:{...t,_v:7};var e}const _a=7,Va=[{version:1,upgrade:function(t){return t},InputSchema:M,OutputSchema:M},{version:2,upgrade:function({blockuments:t,items:e}){const i=t??{},n=Object.values(e??{}).filter((t=>"triggers"in t)),a=Ot(n,"blockumentId"),o={},l={};for(const[t,e]of Object.entries(a)){const n=i[t];if(n){const t=e.flatMap((t=>(t.triggers??[]).map((e=>({...e,sourceId:t.id}))))),a={...n,triggers:t};o[a.id]=a,e.forEach((t=>{l[t.id]=Lt(t,"triggers")})),Object.entries(i).forEach((([t,e])=>{if(!(t in o)){const i={...e,triggers:[]};o[t]=i}}))}}return{blockuments:o,items:l}},InputSchema:M,OutputSchema:_t},{version:3,upgrade:function({blockuments:t,items:e}){return{blockuments:ve(t??{},(t=>({...t,_v:3}))),items:ve(e??{},Se)}},InputSchema:_t,OutputSchema:ye},{version:4,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:4}))),items:ve(t.items??{},vi)}},InputSchema:ye,OutputSchema:fi},{version:5,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:5}))),items:ve(t.items??{},kn)}},InputSchema:fi,OutputSchema:yn},{version:6,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:6}))),items:ve(t.items??{},wa)}},InputSchema:yn,OutputSchema:Ia},{version:7,upgrade:function(t){return{blockuments:ve(t.blockuments??{},(t=>({...t,_v:7}))),items:ve(t.items??{},Ua)}},InputSchema:Ia,OutputSchema:Pa.pL}];function Oa(t){const e=Ta(t),i=Ca(e).OutputSchema.safeParse(t);if(i.success&&e===_a)return i.data;if(i.success)return La(e,_a)(i.data);throw new Error("Unable to comply: no upgrade path was found",{cause:i.error})}function La(t,e){return n(Ea(t,e).map((({InputSchema:t,upgrade:e,OutputSchema:i})=>n(t.parse,e,i.parse))))}function Ea(t,e){const i=a(t+1,e+1),n=Va.filter((({version:t})=>i.includes(t)));return o(n,"version")}function Ca(t){const e=Va.find((e=>e.version===t));if(!e)throw new Error("No converter found for claimed version");return e}function Ta(t){const e=t;let i=Object.values(e?.blockuments??{})[0]?._v??0;return 0===i&&(i=Object.values(e.blockuments).every((t=>t.triggers))?2:1),i}}}]);
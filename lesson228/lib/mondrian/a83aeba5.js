"use strict";(self.webpackChunk_articulate_mondrian_bundles=self.webpackChunk_articulate_mondrian_bundles||[]).push([[690],{8761:(t,e,n)=>{n.d(e,{A:()=>l,b:()=>s});var i=n(1182),o=n.n(i),r=n(2806),a=n.n(r)()(o());a.push([t.id,".hXRin0tc .tiptap {\n  font-family: var(--mon-theme-font-body);\n  height: 100%;\n  width: 100%;\n}\n\n.hXRin0tc .tiptap :is(h1, h2) {\n  line-height: inherit;\n  font-family: var(--mon-theme-font-heading);\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n.hXRin0tc .tiptap :is(p, h1, h2) {\n  margin: 0;\n}\n\n.hXRin0tc .tiptap strong {\n  font-weight: bold;\n}\n\n.hXRin0tc .tiptap em {\n  font-style: italic;\n}\n\n.hXRin0tc .tiptap s {\n  text-decoration: line-through;\n}\n\n.hXRin0tc .tiptap u {\n  text-decoration: underline;\n}\n","",{version:3,sources:["webpack://./../../packages/core/src/styles/tiptap.module.css"],names:[],mappings:"AAAA;EACE,uCAAuC;EACvC,YAAY;EACZ,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,0CAA0C;EAC1C,kBAAkB;EAClB,oBAAoB;AACtB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,0BAA0B;AAC5B",sourcesContent:[".textItem :global(.tiptap) {\n  font-family: var(--mon-theme-font-body);\n  height: 100%;\n  width: 100%;\n}\n\n.textItem :global(.tiptap :is(h1, h2)) {\n  line-height: inherit;\n  font-family: var(--mon-theme-font-heading);\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n.textItem :global(.tiptap :is(p, h1, h2)) {\n  margin: 0;\n}\n\n.textItem :global(.tiptap strong) {\n  font-weight: bold;\n}\n\n.textItem :global(.tiptap em) {\n  font-style: italic;\n}\n\n.textItem :global(.tiptap s) {\n  text-decoration: line-through;\n}\n\n.textItem :global(.tiptap u) {\n  text-decoration: underline;\n}\n"],sourceRoot:""}]);var s="hXRin0tc";const l=a},9690:(t,e,n)=>{n.r(e),n.d(e,{default:()=>_i});var i=n(6218);function o(t){(0,i.append_styles)(t,"svelte-su3qhz",".mondrian__img-1XHDzr{height:100%;width:100%}")}function r(t){let e,n;return{c(){e=(0,i.element)("div"),(0,i.attr)(e,"aria-label",n=t[0].alt),(0,i.attr)(e,"class","mondrian__img-1XHDzr"),(0,i.attr)(e,"role","img")},m(t,n){(0,i.insert)(t,e,n)},p(t,[o]){1&o&&n!==(n=t[0].alt)&&(0,i.attr)(e,"aria-label",n)},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e)}}}function a(t,e,n){let{item:i}=e;return t.$$set=t=>{"item"in t&&n(0,i=t.item)},[i]}n(9763);class s extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,a,r,i.safe_not_equal,{item:0},o)}}const l=s;var d=n(2604),c=n.n(d),m=n(101),u=n.n(m),p=n(5863),_=n.n(p),g=n(3124),h=n.n(g),f=n(6896),b=n.n(f),y=n(9917),v=n.n(y),$=n(8761),z={};z.styleTagTransform=v(),z.setAttributes=h(),z.insert=_().bind(null,"head"),z.domAPI=u(),z.insertStyleElement=b(),c()($.A,z),$.A&&$.A.locals&&$.A.locals;var x=n(7268);const w="isLearn";function k(t){return`assets/${t.path}`}var A=n(6195);const C=A.z.object({id:A.z.string(),path:A.z.string(),name:A.z.string(),width:A.z.number().optional(),height:A.z.number().optional()}),S=A.z.object({unit:A.z.enum(["px","%","auto","fr"]),value:A.z.number()}),I=A.z.object({applied:A.z.boolean().default(!1),type:A.z.enum(["none","fill"]).default("none"),color:A.z.string().default("#000000"),opacity:A.z.number().default(1),style:A.z.enum(["solid","dashed","dotted"]).default("solid"),width:S.default({value:1,unit:"px"})}),E=A.z.object({assetId:A.z.string().optional(),color:A.z.string().optional(),opacity:A.z.number().min(0).max(1).default(1)}),M=E.extend({type:A.z.literal("color"),color:A.z.string().default("#e4e4e4")}),L=A.z.object({width:A.z.number(),height:A.z.number(),left:A.z.number(),top:A.z.number()}),j=E.extend({type:A.z.literal("image"),assetId:A.z.string(),crop:L.default({width:1,height:1,left:0,top:0})}),P=E.extend({type:A.z.literal("none")}),R=A.z.discriminatedUnion("type",[M,j,P]),U=A.z.discriminatedUnion("type",[M,P]),D=A.z.object({top:S.default({value:0,unit:"px"}),left:S.default({value:0,unit:"px"}),bottom:S.default({value:0,unit:"px"}),right:S.default({value:0,unit:"px"})}),T=A.z.object({id:A.z.string(),name:A.z.string().max(128)}),q=T.extend({x:S.default({value:0,unit:"px"}),y:S.default({value:0,unit:"px"}),xOffset:A.z.number().default(0),yOffset:A.z.number().default(0),position:A.z.literal("absolute").default("absolute"),width:S.default({value:100,unit:"%"}),height:S.default({value:100,unit:"%"}),padding:D,fill:R,overlay:U,aspectRatioLocked:A.z.boolean(),border:I,borderRadius:A.z.object({applied:A.z.boolean().default(!1),topLeft:S.default({value:0,unit:"px"}),topRight:S.default({value:0,unit:"px"}),bottomRight:S.default({value:0,unit:"px"}),bottomLeft:S.default({value:0,unit:"px"})}),rotation:A.z.number().default(0),flipX:A.z.boolean().default(!1),flipY:A.z.boolean().default(!1)}),H=A.z.object({id:A.z.string(),event:A.z.enum(["click","hover"])}),N=H.extend({action:A.z.literal("changeState"),targetId:A.z.string(),targetState:A.z.string().default("default")}),B=H.extend({action:A.z.literal("changeVisibility"),targetId:A.z.string(),targetVisibility:A.z.boolean()}),F=A.z.discriminatedUnion("action",[N,B]),Q=t=>A.z.intersection(T,t.partial()),K=t=>A.z.intersection(A.z.object({default:t}),A.z.record(Q(t))),Y=t=>A.z.object({id:A.z.string(),blockumentId:A.z.string(),clonedFromId:A.z.string().optional(),parentId:A.z.string(),type:A.z.string(),name:A.z.string().max(128),tagName:A.z.enum(["div","figure","figcaption","blockquote"]).default("div"),locked:A.z.boolean().default(!1),authoringVisible:A.z.boolean().default(!0),initialVisible:A.z.boolean().default(!0),initialState:A.z.string().default("default"),states:K(t),triggers:A.z.array(F),assets:A.z.record(C).default({}).optional(),removed:A.z.boolean().default(!1)}),X=(Q(q),A.z.object({id:A.z.string(),clonedFromId:A.z.string().optional(),state:A.z.string(),visible:A.z.boolean()})),V=A.z.object({id:A.z.string(),title:A.z.string().max(255),children:A.z.array(X).max(1)}),O=q.extend({children:A.z.array(X)}),Z=Y(O).extend({type:A.z.literal("group")}),J=(Q(O),Y(q).extend({type:A.z.literal("image"),alt:A.z.string()})),G=A.z.intersection(A.z.object({type:A.z.string().optional(),attrs:A.z.record(A.z.any()).optional(),content:A.z.array(A.z.lazy((()=>G))).optional(),marks:A.z.array(A.z.intersection(A.z.object({type:A.z.string(),attrs:A.z.record(A.z.any()).optional()}),A.z.record(A.z.any()))).optional(),text:A.z.string().optional()}),A.z.record(A.z.any())),W=A.z.object({id:A.z.string(),type:A.z.literal("tiptap"),json:G}),tt=A.z.enum(["top","middle","bottom"]),et=q.extend({text:W,textVerticalAlign:tt.default("top")}),nt=Y(et).extend({type:A.z.literal("text")}),it=(Q(et),et.extend({clipPath:A.z.literal("ellipse").nullable().default(null)})),ot=Y(it).extend({type:A.z.literal("shape")}),rt=(Q(it),A.z.object({default:A.z.string()})),at=q.extend({videoSources:rt}),st=Y(at).extend({type:A.z.literal("video")}),lt=(Q(at),A.z.discriminatedUnion("type",[Z,J,ot,nt,st])),dt=A.z.object({blockuments:A.z.record(V).optional(),items:A.z.record(lt).optional()}),ct=(A.z.object({accentContrast:A.z.string(),allowSearch:A.z.boolean(),animateBlockEntrance:A.z.boolean(),blockPaddingBottom:A.z.number(),blockPaddingTop:A.z.number(),bodyTypefaceId:A.z.string(),buttonInlineStyle:A.z.string(),buttonNavigationStyle:A.z.string(),buttonScheme:A.z.string(),colorAccent:A.z.string(),compactShowLessonCount:A.z.boolean(),coverImage:A.z.string(),coverImageAlpha:A.z.number(),coverImageDefault:A.z.string(),coverPageType:A.z.string(),customColorLessonHeaderContrast:A.z.string(),enableVideoPlaybackSpeed:A.z.boolean(),headingTypefaceId:A.z.string(),hideLessonHeaders:A.z.boolean(),lessonHeaderColor:A.z.string().nullable(),lessonHeaderImage:A.z.string(),lessonHeaderImageAlpha:A.z.number(),lessonHeaderImageColor:A.z.string(),lessonHeaderSize:A.z.string(),lessonHeaderStyle:A.z.string(),markLessonsComplete:A.z.boolean(),navigation:A.z.boolean(),navigationRestricted:A.z.boolean(),navigationStyle:A.z.string(),showAuthor:A.z.boolean(),showLessonCount:A.z.boolean(),showNavigationButtons:A.z.boolean(),sidebarStartsOpen:A.z.boolean(),themeId:A.z.string(),uiTypefaceId:A.z.string()}),A.z.enum(["bold","regular","light","italic","black","semibold","semibolditalic","bolditalic","medium"])),mt=A.z.object({id:A.z.string(),key:A.z.string(),original:A.z.string().nullable(),style:ct}),ut=A.z.object({id:A.z.string(),name:A.z.string(),author:A.z.string().nullable(),createdAt:A.z.string(),default:A.z.boolean(),fonts:A.z.record(mt)}),pt=(A.z.record(ut),A.z.union([A.z.boolean(),A.z.number(),A.z.string()])),_t=(A.z.record(pt),A.z.object({featureFlags:A.z.any().optional(),theme:A.z.any().optional(),typefaces:A.z.any().optional()}),dt);var gt;!function(t){t.APP="app",t.BLOCKUMENT="blockument",t.COURSE="course"}(gt||(gt={})),n(9840);var ht=n(4198),ft=n(4717),bt=n(3004),yt=n(4758),vt=n(2359),$t=n(31),zt=n(2740),xt=n(2559),wt=n(5873),kt=n(9395);const At=/([a-z%]+)\s*$/i,Ct=ht.YY.create({name:"textSize",addGlobalAttributes:()=>[{types:["textStyle","highlight"],attributes:{textSize:{default:14,parseHTML(t){const e=t.style.fontSize,n=parseFloat(e);if(isNaN(n))return null;const i=At.exec(e);if(null==i)return null;switch(i[1]){case"rem":return Math.round(10*n);case"px":return Math.round(n);default:return null}},renderHTML:t=>({style:`font-size: ${t.textSize/10}rem`})}}}],addCommands:()=>({setTextSize:t=>({chain:e,editor:n})=>{const i=n.isActive("highlight"),o=e().setMark("textStyle",{textSize:t});return i&&o.setMark("highlight",{textSize:t}),o.run()}})}),St=ht.YY.create({name:"lineHeight",addGlobalAttributes:()=>[{types:["paragraph"],attributes:{lineHeight:{default:1.2,parseHTML(t){const e=t.style.lineHeight,n=parseFloat(e);return isNaN(n)?null:n},renderHTML:t=>({style:`line-height: ${t.lineHeight};`})}}}],addCommands:()=>({setLineHeight:t=>({commands:e})=>e.updateAttributes("paragraph",{lineHeight:t})})}),It="merriweather",Et=ht.YY.create({name:"fontFamily",addGlobalAttributes:()=>[{types:["textStyle"],attributes:{fontFamily:{default:It,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}],addCommands:()=>({setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run()})});ft.A.configure({types:["textStyle"]});const Mt=ht.YY.create({name:"init",addCommands:()=>({initFontFamily:()=>({chain:t})=>t().setFontFamily(It).run(),initLineHeight:()=>({chain:t})=>t().setLineHeight(1.2).run(),initTextSize:()=>({chain:t})=>t().setTextSize(14).run(),initColor:()=>({chain:t})=>t().setColor("#000000").run()})}),Lt="latestDefocusedSelectionDecoration",jt=ht.YY.create({name:Lt,addProseMirrorPlugins:()=>[new xt.k_({key:new xt.hs(Lt),state:{init:t=>wt.zF.empty,apply(t,e){const{doc:n,selection:i}=t,o=t.getMeta(Lt),r=i&&i.from!==i.to;if(!r||"focus"===o?.action)return wt.zF.empty;if(r&&"blur"===o?.action){const t=wt.NZ.inline(i.from,i.to,{class:"latest-defocused-selection",nodeName:"mark"});return wt.zF.create(n,[t])}return e}},props:{decorations(t){return this.getState(t)},handleDOMEvents:{blur(t){const{tr:e}=t.state,n=e.setMeta(Lt,{from:e.selection.from,to:e.selection.to,action:"blur"});t.dispatch(n)},focus(t){const{tr:e}=t.state,n=e.setMeta(Lt,{from:e.selection.from,to:e.selection.to,action:"focus"});t.dispatch(n)}}}})]}),Pt=[kt.A.configure({history:!1,heading:{levels:[1,2]}}),vt.A.configure({types:["heading","paragraph"]}),bt.Ay.configure({multicolor:!0}),$t.A,ft.A,Ct,St,zt.A,yt.A,Et,Mt,jt],Rt=((0,ht._w)(Pt),"hover"),Ut="changeState",Dt="changeVisibility";var Tt=n(1120);const qt=new Map,Ht={...(0,Tt.writable)(qt),add:(t,e)=>(qt.has(t)||qt.set(t,function(t){let e,n,i;t.subscribe((t=>{e=t}));const o=(0,Tt.writable)(e);o.subscribe((t=>{n=i??e,i=t}));const r={...o,revert(t){i===t&&r.set(n)},reset(){r.set(e)}};return r}(e)),qt.get(t)),get(t){if(!qt.has(t))throw new Error(`No state found for item ${t}`);return qt.get(t)},resetAll(){[...qt.values()].forEach((t=>{t.reset()}))}},Nt=new Map,Bt={...(0,Tt.writable)(Nt),add:(t,e)=>(Nt.set(t,function(t){let e;t.subscribe((t=>{e=t}));const n={...(0,Tt.writable)(e),show(){n.set(!0)},hide(){n.set(!1)},reset(){n.set(e)}};return n}(e)),Nt.get(t)),get(t){if(!Nt.has(t))throw new Error(`No visibility found for item ${t}`);return Nt.get(t)},resetAll(){[...Nt.values()].forEach((t=>{t.reset()}))}};function Ft(t,e,n){return e.addEventListener(t,n),()=>{e.removeEventListener(t,n)}}const{min:Qt}=Math;function Kt(t,e,n){return t+n<=e?t:t*e/(t+n)}function Yt(t,e,n,i,o){return Qt(Kt(n,e,t),Kt(n,i,o))}var Xt=n(4015),Vt=n.n(Xt);function Ot(t,e,n=Object.keys(t.states.default)){const i=t.states.default,o=structuredClone(t.states[e]);return n.reduce(((t,e)=>(Vt()(t[e])&&(t[e]=structuredClone(i[e])),t)),o)}const Zt=({value:t,unit:e})=>{switch(e){case"auto":return"auto";case"px":return t/10+"rem";default:return(({value:t,unit:e})=>`${t}${e}`)({value:t,unit:e})}},{Map:Jt}=i.globals;function Gt(t,e,n){const i=t.slice();return i[2]=e[n],i}function Wt(t,e){let n,o;return{key:t,first:null,c(){n=(0,i.element)("link"),(0,i.attr)(n,"rel","prefetch"),(0,i.attr)(n,"href",o=k(e[2])),(0,i.attr)(n,"as","image"),this.first=n},m(t,e){(0,i.insert)(t,n,e)},p(t,r){e=t,1&r&&o!==(o=k(e[2]))&&(0,i.attr)(n,"href",o)},d(t){t&&(0,i.detach)(n)}}}function te(t){let e,n=[],o=new Jt,r=(0,i.ensure_array_like)(t[0].values());const a=t=>t[2].id;for(let e=0;e<r.length;e+=1){let i=Gt(t,r,e),s=a(i);o.set(s,n[e]=Wt(s,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=(0,i.empty)()},m(t,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(document.head,null);(0,i.append)(document.head,e)},p(t,[s]){1&s&&(r=(0,i.ensure_array_like)(t[0].values()),n=(0,i.update_keyed_each)(n,s,a,1,t,r,o,e.parentNode,i.destroy_block,Wt,e,Gt))},i:i.noop,o:i.noop,d(t){for(let t=0;t<n.length;t+=1)n[t].d();(0,i.detach)(e)}}}function ee(t,e,n){let i,{items:o}=e;return t.$$set=t=>{"items"in t&&n(1,o=t.items)},t.$$.update=()=>{2&t.$$.dirty&&n(0,i=new Map(o.flatMap((t=>Object.values(t.assets??{}))).map((t=>[t.id,t]))))},[i,o]}class ne extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,ee,te,i.safe_not_equal,{items:1})}}const ie=ne;function oe(t){(0,i.append_styles)(t,"svelte-1k5prtd",".mondrian__clipped-1EjkQh{border-radius:inherit;display:flex;height:100%;inset:0;position:absolute;width:100%;z-index:-1;transition:inherit}.mondrian__clipped-1EjkQh.mondrian__--ellipse-207jZ2{clip-path:ellipse(50% 50%)}")}function re(t){let e,n;const o=t[2].default,r=(0,i.create_slot)(o,t,t[1],null);return{c(){e=(0,i.element)("div"),r&&r.c(),(0,i.attr)(e,"class","mondrian__clipped-1EjkQh"),(0,i.toggle_class)(e,"mondrian__--ellipse-207jZ2","ellipse"===t[0])},m(t,o){(0,i.insert)(t,e,o),r&&r.m(e,null),n=!0},p(t,[a]){r&&r.p&&(!n||2&a)&&(0,i.update_slot_base)(r,o,t,t[1],n?(0,i.get_slot_changes)(o,t[1],a,null):(0,i.get_all_dirty_from_scope)(t[1]),null),(!n||1&a)&&(0,i.toggle_class)(e,"mondrian__--ellipse-207jZ2","ellipse"===t[0])},i(t){n||((0,i.transition_in)(r,t),n=!0)},o(t){(0,i.transition_out)(r,t),n=!1},d(t){t&&(0,i.detach)(e),r&&r.d(t)}}}function ae(t,e,n){let{$$slots:i={},$$scope:o}=e,{clipPath:r}=e;return t.$$set=t=>{"clipPath"in t&&n(0,r=t.clipPath),"$$scope"in t&&n(1,o=t.$$scope)},[r,o,i]}class se extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,ae,re,i.safe_not_equal,{clipPath:0},oe)}}const le=se;function de(t){(0,i.append_styles)(t,"svelte-y172nk",".mondrian__fill-28Ulya{position:absolute;inset:0;transition:inherit;border-radius:inherit}.mondrian__fill-image-3g2lhQ{overflow:hidden}.mondrian__fill-image-3g2lhQ .mondrian__image-lJ-0q6{background-size:cover;background-position:center}")}function ce(t){let e,n,o=100*t[0].crop.width+"%",r=100*t[0].crop.height+"%",a=`translate(${(50*(1-t[0].crop.width)+100*t[0].crop.left)/t[0].crop.width}%, ${(50*(1-t[0].crop.height)+100*t[0].crop.top)/t[0].crop.height}%`;return{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),(0,i.attr)(n,"class","mondrian__image-lJ-0q6"),(0,i.set_style)(n,"background-image",t[1]),(0,i.set_style)(n,"width",o),(0,i.set_style)(n,"height",r),(0,i.set_style)(n,"transform",a),(0,i.attr)(e,"class","mondrian__fill-28Ulya mondrian__fill-image-3g2lhQ")},m(t,o){(0,i.insert)(t,e,o),(0,i.append)(e,n)},p(t,e){2&e&&(0,i.set_style)(n,"background-image",t[1]),1&e&&o!==(o=100*t[0].crop.width+"%")&&(0,i.set_style)(n,"width",o),1&e&&r!==(r=100*t[0].crop.height+"%")&&(0,i.set_style)(n,"height",r),1&e&&a!==(a=`translate(${(50*(1-t[0].crop.width)+100*t[0].crop.left)/t[0].crop.width}%, ${(50*(1-t[0].crop.height)+100*t[0].crop.top)/t[0].crop.height}%`)&&(0,i.set_style)(n,"transform",a)},d(t){t&&(0,i.detach)(e)}}}function me(t){let e;return{c(){e=(0,i.element)("div"),(0,i.attr)(e,"class","mondrian__fill-28Ulya fill-color"),(0,i.set_style)(e,"background-color",t[0].color),(0,i.set_style)(e,"opacity",t[0].opacity)},m(t,n){(0,i.insert)(t,e,n)},p(t,n){1&n&&(0,i.set_style)(e,"background-color",t[0].color),1&n&&(0,i.set_style)(e,"opacity",t[0].opacity)},d(t){t&&(0,i.detach)(e)}}}function ue(t){let e;function n(t,e){return"color"===t[0].type?me:"image"===t[0].type?ce:void 0}let o=n(t),r=o&&o(t);return{c(){r&&r.c(),e=(0,i.empty)()},m(t,n){r&&r.m(t,n),(0,i.insert)(t,e,n)},p(t,[i]){o===(o=n(t))&&r?r.p(t,i):(r&&r.d(1),r=o&&o(t),r&&(r.c(),r.m(e.parentNode,e)))},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e),r&&r.d(t)}}}function pe(t,e,n){let i,{assets:o}=e,{fill:r}=e;return t.$$set=t=>{"assets"in t&&n(2,o=t.assets),"fill"in t&&n(0,r=t.fill)},t.$$.update=()=>{5&t.$$.dirty&&n(1,i="image"===r.type&&o?.[r.assetId]?`url("${k(o?.[r.assetId])}")`:null)},[r,i,o]}class _e extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,pe,ue,i.safe_not_equal,{assets:2,fill:0},de)}}const ge=_e;n(2466);const he=['input:not([type="checkbox"], [type="radio"])',"textarea","[contenteditable]"].join(", ");var fe=n(9205);const be=n.n(fe)()("mondrian").extend("keyboard"),ye=(Object.freeze(["Alt","Control","Meta","Shift"]),{activeModifierKeys:new Set,get alt(){return ye.activeModifierKeys.has("Alt")},get meta(){return ye.activeModifierKeys.has("Meta")||ye.activeModifierKeys.has("Control")},get shift(){return ye.activeModifierKeys.has("Shift")},key:void 0,get combo(){return[ye.meta&&"Meta",ye.alt&&"Alt",ye.shift&&"Shift",ye.key].filter(Boolean).join("+")}});function ve({metaKey:t,altKey:e,shiftKey:n,ctrlKey:i},o){let r=!1;return t!==o.has("Meta")&&(r=!0,t?o.add("Meta"):o.delete("Meta")),e!==o.has("Alt")&&(r=!0,e?o.add("Alt"):o.delete("Alt")),n!==o.has("Shift")&&(r=!0,n?o.add("Shift"):o.delete("Shift")),i!==o.has("Control")&&(r=!0,i?o.add("Control"):o.delete("Control")),r}let $e=!1;const ze={...(0,Tt.readable)(ye,(t=>{function e(e){const n="keydown"===e.type;ve(e,ye.activeModifierKeys),ye.key=n?e.key:void 0,t(ye)}function n(e){ve(e,ye.activeModifierKeys)&&t(ye)}$e||($e=!0,window.addEventListener("keydown",e),window.addEventListener("keyup",e),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&(ye.activeModifierKeys.clear(),ye.key=void 0,t(ye))})),window.addEventListener("blur",(function(){ye.activeModifierKeys.clear(),ye.key=void 0,t(ye)})),window.addEventListener("mousedown",n,{passive:!0,capture:!0}),window.addEventListener("mousemove",n,{passive:!0,capture:!0}))})),is:t=>(ye.combo&&be(`comparing keycombos, store: ${ye.combo}, comparison: ${t}`),ye.combo.toLowerCase()===t.toLowerCase()),on(t,e){const n=n=>{!function(){const{activeElement:t}=document;return null!=t&&!!t.matches(he)}()&&ze.is(t)&&(be("keyCombo matched, executing handler",t),e(n))};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}},xe={down:!1,downX:-1,downY:-1,target:void 0,x:-1,y:-1},we=((0,Tt.readable)(xe,(t=>{return window.addEventListener("mousedown",e),window.addEventListener("mousemove",i),window.addEventListener("mouseup",n),function(){window.removeEventListener("mousedown",e),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",n)};function e(t){xe.down=!0,xe.downX=xe.x=t.clientX,xe.downY=xe.y=t.clientY,xe.target=t.target,o()}function n(){xe.down=!1,xe.downX=xe.x=xe.downY=xe.y=-1,xe.target=void 0,o()}function i(t){xe.x=t.x,xe.y=t.y,o()}function o(){t(xe)}})),"mondrian-suspense");i.SvelteComponent,n(2732);var ke=n(5494);const Ae={nw:"top-start",n:"top",ne:"top-end",sw:"bottom-start",s:"bottom",se:"bottom-end"},Ce=new ResizeObserver(Le);let Se,Ie,Ee;function Me(t){const e=function(t){for(let e=t;e;e=e.parentElement)if(e.classList.contains("mon-tooltip-anchor"))return e}(t.target);if(e===Se)return;Ie&&(Ie.removeAttribute("data-active"),Ce.unobserve(Ie));const n=e?.querySelector("[data-mon-tooltip]");if(!n||n.getAttribute("aria-hidden"))return Se=void 0,void(Ie=void 0);n.setAttribute("data-active","true"),n.showPopover(),Se=e,Ie=n,Ee=Ie.querySelector("[data-mon-tooltip-arrow]"),Le(),Ce.observe(Ie)}async function Le(){if(Se&&Ie){const{x:t,y:e,middlewareData:n}=await(0,ke.rD)(Se,Ie,{middleware:[(0,ke.cY)(5),(0,ke.UU)(),(0,ke.BN)(),(0,ke.UE)({element:Ee})],strategy:"fixed",placement:Ae[Ie.getAttribute("data-position")]});if(Ie.style.transform=`translate(${t}px,${e}px)`,n.arrow){const{x:t,y:e}=n.arrow;Ee.style.left=null!=t?`${t}px`:"",Ee.style.top=null!=e?`${e}px`:""}}}function je(t){(0,i.append_styles)(t,"svelte-117tjcs","@keyframes mondrian__spin-1QnPvy{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}.mondrian__mon-spinner-2Tr2Rn{display:flex;flex-direction:row;align-items:center;gap:var(--art-space-2)}.mondrian__mon-spinner__icon-yho5bI{flex-shrink:0;animation:mondrian__spin-1QnPvy 1s linear infinite}")}function Pe(t){let e,n,o,r,a,s,l;const d=t[3].default,c=(0,i.create_slot)(d,t,t[2],null);return{c(){e=(0,i.element)("div"),n=(0,i.svg_element)("svg"),o=(0,i.svg_element)("path"),a=(0,i.svg_element)("path"),s=(0,i.space)(),c&&c.c(),(0,i.attr)(o,"fill","currentColor"),(0,i.attr)(o,"fill-rule","evenodd"),(0,i.attr)(o,"d","M12 19a7 7 0 100-14 7 7 0 000 14zm0 3c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"),(0,i.attr)(o,"clip-rule","evenodd"),(0,i.attr)(o,"opacity",r=.2),(0,i.attr)(a,"fill","currentColor"),(0,i.attr)(a,"d","M2 12C2 6.477 6.477 2 12 2v3a7 7 0 00-7 7H2z"),(0,i.attr)(n,"class","mondrian__mon-spinner__icon-yho5bI"),(0,i.attr)(n,"fill","none"),(0,i.attr)(n,"viewBox","0 0 24 24"),(0,i.set_style)(n,"width",t[0]),(0,i.set_style)(n,"height",t[0]),(0,i.attr)(e,"class","mondrian__mon-spinner-2Tr2Rn")},m(t,r){(0,i.insert)(t,e,r),(0,i.append)(e,n),(0,i.append)(n,o),(0,i.append)(n,a),(0,i.append)(e,s),c&&c.m(e,null),l=!0},p(t,[e]){1&e&&(0,i.set_style)(n,"width",t[0]),1&e&&(0,i.set_style)(n,"height",t[0]),c&&c.p&&(!l||4&e)&&(0,i.update_slot_base)(c,d,t,t[2],l?(0,i.get_slot_changes)(d,t[2],e,null):(0,i.get_all_dirty_from_scope)(t[2]),null)},i(t){l||((0,i.transition_in)(c,t),l=!0)},o(t){(0,i.transition_out)(c,t),l=!1},d(t){t&&(0,i.detach)(e),c&&c.d(t)}}}function Re(t,e,n){let i,{$$slots:o={},$$scope:r}=e,{size:a="medium"}=e;const s={small:"1rem",medium:"2rem",large:"3rem"};return t.$$set=t=>{"size"in t&&n(1,a=t.size),"$$scope"in t&&n(2,r=t.$$scope)},t.$$.update=()=>{2&t.$$.dirty&&n(0,i=s[a])},[i,a,r,o]}document.addEventListener("mouseover",Me,{passive:!0}),document.documentElement.addEventListener("mouseleave",Me,{passive:!0}),document.addEventListener("scroll",Le,{passive:!0,capture:!0}),i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,n(9777),i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent;class Ue extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Re,Pe,i.safe_not_equal,{size:1},je)}}const De=Ue;function Te(t){(0,i.append_styles)(t,"svelte-1ooljvd",".mondrian__suspense-3tgPBN.mondrian__--loading-3irTkJ{visibility:hidden}")}i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent;const qe=t=>({isLoading:1&t}),He=t=>({isLoading:t[0]});function Ne(t){let e,n;const o=t[2].default,r=(0,i.create_slot)(o,t,t[1],He);return{c(){e=(0,i.element)("div"),r&&r.c(),(0,i.attr)(e,"class","mondrian__suspense-3tgPBN"),(0,i.toggle_class)(e,"mondrian__--loading-3irTkJ",t[0])},m(t,o){(0,i.insert)(t,e,o),r&&r.m(e,null),n=!0},p(t,[a]){r&&r.p&&(!n||3&a)&&(0,i.update_slot_base)(r,o,t,t[1],n?(0,i.get_slot_changes)(o,t[1],a,qe):(0,i.get_all_dirty_from_scope)(t[1]),He),(!n||1&a)&&(0,i.toggle_class)(e,"mondrian__--loading-3irTkJ",t[0])},i(t){n||((0,i.transition_in)(r,t),n=!0)},o(t){(0,i.transition_out)(r,t),n=!1},d(t){t&&(0,i.detach)(e),r&&r.d(t)}}}function Be(t,e,n){let{$$slots:i={},$$scope:o}=e;const r=function(){const t=new Set;return(0,x.setContext)(we,t),t}();let a=!0;return(0,x.onMount)((()=>{Promise.all(r).then((()=>{n(0,a=!1)}))})),t.$$set=t=>{"$$scope"in t&&n(1,o=t.$$scope)},[a,o,i]}class Fe extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Be,Ne,i.safe_not_equal,{},Te)}}const Qe=Fe;function Ke(t){(0,i.append_styles)(t,"svelte-a49skc","svg.mondrian__border-2HRKP_{position:absolute;pointer-events:none;z-index:-1}svg.mondrian__border-2HRKP_ path{fill:none;stroke-linecap:round}")}function Ye(t){let e,n,o,r,a;return{c(){e=(0,i.svg_element)("svg"),n=(0,i.svg_element)("path"),(0,i.attr)(n,"stroke-width",t[3]),(0,i.attr)(n,"stroke",o=t[2].color),(0,i.attr)(n,"stroke-dasharray",t[4]),(0,i.attr)(n,"d",t[5]),(0,i.attr)(e,"class","mondrian__border-2HRKP_"),(0,i.attr)(e,"viewBox",t[7]),(0,i.attr)(e,"width",r=t[0].value+t[3]),(0,i.attr)(e,"height",a=t[1].value+t[3]),(0,i.set_style)(e,"inset",t[6]),(0,i.set_style)(e,"opacity",t[2].opacity)},m(t,o){(0,i.insert)(t,e,o),(0,i.append)(e,n)},p(t,s){8&s&&(0,i.attr)(n,"stroke-width",t[3]),4&s&&o!==(o=t[2].color)&&(0,i.attr)(n,"stroke",o),16&s&&(0,i.attr)(n,"stroke-dasharray",t[4]),32&s&&(0,i.attr)(n,"d",t[5]),128&s&&(0,i.attr)(e,"viewBox",t[7]),9&s&&r!==(r=t[0].value+t[3])&&(0,i.attr)(e,"width",r),10&s&&a!==(a=t[1].value+t[3])&&(0,i.attr)(e,"height",a),64&s&&(0,i.set_style)(e,"inset",t[6]),4&s&&(0,i.set_style)(e,"opacity",t[2].opacity)},d(t){t&&(0,i.detach)(e)}}}function Xe(t){let e,n=t[2].applied&&Ye(t);return{c(){n&&n.c(),e=(0,i.empty)()},m(t,o){n&&n.m(t,o),(0,i.insert)(t,e,o)},p(t,[i]){t[2].applied?n?n.p(t,i):(n=Ye(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e),n&&n.d(t)}}}function Ve(t,e,n){let i,o,r,a,s,l,d,c,{width:m}=e,{height:u}=e,{border:p}=e,{clipPath:_}=e;return t.$$set=t=>{"width"in t&&n(0,m=t.width),"height"in t&&n(1,u=t.height),"border"in t&&n(2,p=t.border),"clipPath"in t&&n(8,_=t.clipPath)},t.$$.update=()=>{1&t.$$.dirty&&n(10,i=m.value),2&t.$$.dirty&&n(9,o=u.value),4&t.$$.dirty&&n(3,r=p.width.value),8&t.$$.dirty&&n(11,a=r/2),1544&t.$$.dirty&&n(7,s=`0 0 ${i+r} ${o+r}`),2048&t.$$.dirty&&n(6,l=`${-a}px auto auto ${-a}px`),3840&t.$$.dirty&&n(5,d=`M ${a} ${a} `+function(t,e,n){let i="m 0 0";if("ellipse"===n)i+=` m ${t} ${e/2}`,i+=` a ${t/2} ${e/2} 0 0 1 ${-t},0`,i+=` a ${t/2} ${e/2} 0 0 1 ${t},0`;else if(n.applied){const o=n.topRight.value,r=n.bottomRight.value,a=n.bottomLeft.value,s=n.topLeft.value,l=Yt(s,t,o,e,r),d=Yt(o,e,r,t,a),c=Yt(r,t,a,e,s),m=Yt(a,e,s,t,o);i+=` m ${m} 0`,i+=` l ${t-m-l} 0 a ${l} ${l} 0 0 1 ${l},${l}`,i+=` l 0 ${e-l-d} a ${d} ${d} 0 0 1 ${-d},${d}`,i+=` l ${d+c-t} 0 a ${c} ${c} 0 0 1 ${-c},${-c}`,i+=` l 0 ${c+m-e} a ${m} ${m} 0 0 1 ${m},${-m}`}else i+=` l ${t} 0`,i+=` l 0 ${e}`,i+=` l ${-t} 0`,i+=" l 0 "+-e;return i+=" z",i}(i,o,_)),12&t.$$.dirty&&n(4,c="dashed"===p.style?`${2*r} ${2*r}`:"dotted"===p.style?"0 "+2*r:void 0)},[m,u,p,r,c,d,l,s,_,o,i,a]}i.SvelteComponent,i.SvelteComponent,i.SvelteComponent,i.SvelteComponent;class Oe extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Ve,Xe,i.safe_not_equal,{width:0,height:1,border:2,clipPath:8},Ke)}}const Ze=Oe;function Je(t){(0,i.append_styles)(t,"svelte-p8ymlr",".mondrian__item-2DsUh4{--mon-item-bounding-box-color:var(--mon-color-border-selected);position:absolute;z-index:1;height:max-content;width:max-content;pointer-events:var(--mon-item-pointer-events);box-sizing:border-box}.mondrian__item-2DsUh4::before{content:'';pointer-events:none;position:absolute;inset:0;outline:0 solid transparent;transition:outline 0.15s ease-in-out}.mondrian__item-2DsUh4.mondrian__--mon-dragging-2MbxPz{cursor:grab;opacity:0.3}.mondrian__item-2DsUh4.mondrian__--root-2EXV5y{position:relative}.mondrian__item-2DsUh4{opacity:1;transform:none}.mondrian__item-2DsUh4.mondrian__--smooth-transitions-3JP837,.mondrian__item-2DsUh4.mondrian__--smooth-transitions-3JP837 .mondrian__conditionally-visible-1qSoKk{transition:all 100ms ease}.mondrian__item-2DsUh4.mondrian__--hidden-3rqMFc{pointer-events:none}.mondrian__item-2DsUh4.mondrian__--hidden-3rqMFc .mondrian__conditionally-visible-1qSoKk{opacity:0;--mon-item-pointer-events:none}.mondrian__item-2DsUh4:is(.mondrian__--selected-rQQEpt, .mondrian__--dropping-into-2sPxJQ, [data-selectable-children])::before,.mondrian__item-2DsUh4.mondrian__--hover-3A3TRM:not(.mondrian__--hidden-3rqMFc)::before{outline:var(--bounding-box-thickness, 0) var(--bounding-box-style, solid)\n      var(--mon-item-bounding-box-color)}.mondrian__item-2DsUh4.mondrian__--hover-3A3TRM{--bounding-box-thickness:var(--art-border-width-lg)}.mondrian__item-2DsUh4.mondrian__--selected-rQQEpt{--bounding-box-thickness:var(--art-border-width-md)}.mondrian__item-2DsUh4.mondrian__--dropping-into-2sPxJQ{--bounding-box-thickness:var(--art-border-width-md);--bounding-box-style:dashed}.mondrian__item-2DsUh4[data-selectable-children]::before{--bounding-box-thickness:var(--art-border-width-md);opacity:0.3}.mondrian__item-2DsUh4.mondrian__--clickable-3m9uUx{cursor:pointer}.mondrian__item-2DsUh4:is(.mondrian__--selected-rQQEpt):not(.mondrian__--hidden-3rqMFc):hover{cursor:grab}.mondrian__item-2DsUh4:is(.mondrian__--selected-rQQEpt):not(.mondrian__--hidden-3rqMFc):active{cursor:grabbing}.mondrian__item-2DsUh4.mondrian__--debug-3iu3YY::after{content:attr(data-parent-id) '>' attr(data-item-id);position:absolute;bottom:0;right:0;overflow:hidden;white-space:nowrap;padding:var(--art-space-0-25) var(--art-space-0-5);font:1.1rem / 1 monospace;background-color:#f006;-webkit-backdrop-filter:grayscale(100%) blur(3px);backdrop-filter:grayscale(100%) blur(3px);color:#000;border-radius:var(--art-border-radius-sm) 0 0 0;pointer-events:none}.mondrian__item-2DsUh4.mondrian__--preview-item-v3e-0e{--mon-item-pointer-events:none;position:static}.mondrian__item-2DsUh4:focus-visible{outline:none}\n      .mon-app:not(.mon-meta-key-down):not([data-mon-preview-active='true'])\n    \n    :is(\n      .mondrian__item-2DsUh4[data-item-type='group'] .mondrian__item-2DsUh4:not([data-selectable], .mondrian__--selected-rQQEpt)\n    ){--mon-item-pointer-events:none}.mondrian__item-2DsUh4[data-selectable]:not(.mondrian__--hidden-3rqMFc){--mon-item-pointer-events:auto}.mondrian__conditionally-visible-1qSoKk{width:100%;height:100%;border-radius:inherit}.mondrian__loading-overlay-1VoKHr{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;background-color:rgba(255, 255, 255, 0.7);z-index:9999}")}const Ge=t=>({}),We=t=>({}),tn=t=>({}),en=t=>({}),nn=t=>({}),on=t=>({});function rn(t){let e,n;return e=new ge({props:{assets:t[0].assets,fill:t[24]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};1&n[0]&&(i.assets=t[0].assets),16777216&n[0]&&(i.fill=t[24]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function an(t){let e,n;return e=new ge({props:{assets:t[0].assets,fill:t[23]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};1&n[0]&&(i.assets=t[0].assets),8388608&n[0]&&(i.fill=t[23]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function sn(t){let e,n,o,r=null!=t[24]&&rn(t),a=null!=t[23]&&an(t);return{c(){r&&r.c(),e=(0,i.space)(),a&&a.c(),n=(0,i.empty)()},m(t,s){r&&r.m(t,s),(0,i.insert)(t,e,s),a&&a.m(t,s),(0,i.insert)(t,n,s),o=!0},p(t,o){null!=t[24]?r?(r.p(t,o),16777216&o[0]&&(0,i.transition_in)(r,1)):(r=rn(t),r.c(),(0,i.transition_in)(r,1),r.m(e.parentNode,e)):r&&((0,i.group_outros)(),(0,i.transition_out)(r,1,1,(()=>{r=null})),(0,i.check_outros)()),null!=t[23]?a?(a.p(t,o),8388608&o[0]&&(0,i.transition_in)(a,1)):(a=an(t),a.c(),(0,i.transition_in)(a,1),a.m(n.parentNode,n)):a&&((0,i.group_outros)(),(0,i.transition_out)(a,1,1,(()=>{a=null})),(0,i.check_outros)())},i(t){o||((0,i.transition_in)(r),(0,i.transition_in)(a),o=!0)},o(t){(0,i.transition_out)(r),(0,i.transition_out)(a),o=!1},d(t){t&&((0,i.detach)(e),(0,i.detach)(n)),r&&r.d(t),a&&a.d(t)}}}function ln(t){let e,n,o;return n=new De({props:{size:"large"}}),{c(){e=(0,i.element)("div"),(0,i.create_component)(n.$$.fragment),(0,i.attr)(e,"class","mondrian__loading-overlay-1VoKHr")},m(t,r){(0,i.insert)(t,e,r),(0,i.mount_component)(n,e,null),o=!0},i(t){o||((0,i.transition_in)(n.$$.fragment,t),o=!0)},o(t){(0,i.transition_out)(n.$$.fragment,t),o=!1},d(t){t&&(0,i.detach)(e),(0,i.destroy_component)(n)}}}function dn(t){let e,n,o,r,a,s,l,d,c,m,u,p,_,g,h,f,b,y,v,$,z,x,w,k,A,C=`rotate(${t[17]}deg) scale(${t[15].flipX?-1:1}, ${t[15].flipY?-1:1})`;const S=t[34]["always-visible-before"],I=(0,i.create_slot)(S,t,t[40],on);a=new le({props:{clipPath:t[16],$$slots:{default:[sn]},$$scope:{ctx:t}}});const E=t[34].before,M=(0,i.create_slot)(E,t,t[40],en),L=[t[20]];var j=t[2];function P(t,e){let n={};for(let t=0;t<L.length;t+=1)n=(0,i.assign)(n,L[t]);return void 0!==e&&1048576&e[0]&&(n=(0,i.assign)(n,(0,i.get_spread_update)(L,[(0,i.get_spread_object)(t[20])]))),{props:n}}j&&(d=(0,i.construct_svelte_component)(j,P(t))),m=new Ze({props:{width:t[15].width,height:t[15].height,border:t[15].border,clipPath:t[16]??t[15].borderRadius}});const R=t[34].after,U=(0,i.create_slot)(R,t,t[40],We);let D=t[14]&&ln(),T=[{"data-item-type":_=t[0].type},{"data-item-id":g=t[0].id.slice(0,5)},{"data-parent-id":h=t[0].parentId.slice(0,5)},{"data-mon-locked":f=!!t[7]||void 0},{"data-mon-item-id":b=t[0].id},{"data-selectable-children":y=t[12]||void 0},{"data-selectable":v=t[13]||void 0},{"aria-hidden":$=!t[11]&&!t[5]},{class:"mondrian__item-2DsUh4"},{tabindex:"-1"}],q={};for(let t=0;t<T.length;t+=1)q=(0,i.assign)(q,T[t]);return{c(){e=(0,i.element)(t[0].tagName??"div"),n=(0,i.element)("div"),I&&I.c(),o=(0,i.space)(),r=(0,i.element)("div"),(0,i.create_component)(a.$$.fragment),s=(0,i.space)(),M&&M.c(),l=(0,i.space)(),d&&(0,i.create_component)(d.$$.fragment),c=(0,i.space)(),(0,i.create_component)(m.$$.fragment),u=(0,i.space)(),U&&U.c(),p=(0,i.space)(),D&&D.c(),(0,i.attr)(n,"class","always-visible"),(0,i.attr)(r,"class","mondrian__conditionally-visible-1qSoKk"),(0,i.set_dynamic_element_data)(t[0].tagName??"div")(e,q),(0,i.toggle_class)(e,"mondrian__--debug-3iu3YY",!1),(0,i.toggle_class)(e,"mondrian__--mon-dragging-2MbxPz",t[8]),(0,i.toggle_class)(e,"mondrian__--root-2EXV5y",t[1]),(0,i.toggle_class)(e,"mondrian__--hidden-3rqMFc",!t[11]),(0,i.toggle_class)(e,"mondrian__--selected-rQQEpt",t[5]),(0,i.toggle_class)(e,"mondrian__--dropping-into-2sPxJQ",t[9]),(0,i.toggle_class)(e,"mondrian__--hover-3A3TRM",t[6]),(0,i.toggle_class)(e,"mondrian__--preview-item-v3e-0e",t[4]),(0,i.toggle_class)(e,"mondrian__--clickable-3m9uUx",t[19]),(0,i.toggle_class)(e,"mondrian__--smooth-transitions-3JP837",t[29]),(0,i.set_style)(e,"--mon-item-border-width",t[15].border.applied?`calc(${Zt(t[15].border.width)} / 2)`:"0"),(0,i.set_style)(e,"width",t[28]),(0,i.set_style)(e,"height",t[27]),(0,i.set_style)(e,"border-radius",t[22]),(0,i.set_style)(e,"top",t[25]),(0,i.set_style)(e,"left",t[26]),(0,i.set_style)(e,"z-index",t[21]),(0,i.set_style)(e,"transform",C)},m(_,g){(0,i.insert)(_,e,g),(0,i.append)(e,n),I&&I.m(n,null),(0,i.append)(e,o),(0,i.append)(e,r),(0,i.mount_component)(a,r,null),(0,i.append)(r,s),M&&M.m(r,null),(0,i.append)(r,l),d&&(0,i.mount_component)(d,r,null),(0,i.append)(r,c),(0,i.mount_component)(m,r,null),(0,i.append)(r,u),U&&U.m(r,null),(0,i.append)(e,p),D&&D.m(e,null),t[39](e),w=!0,k||(A=[(0,i.listen)(e,"mousedown",t[35]),(0,i.listen)(e,"click",t[36]),(0,i.listen)(e,"keydown",t[37]),(0,i.listen)(e,"keyup",t[38]),(0,i.action_destroyer)(z=t[10].call(null,e,{itemId:t[0].id,enabled:!t[7]})),(0,i.action_destroyer)(x=t[3].call(null,e,t[0]))],k=!0)},p(t,n){I&&I.p&&(!w||512&n[1])&&(0,i.update_slot_base)(I,S,t,t[40],w?(0,i.get_slot_changes)(S,t[40],n,nn):(0,i.get_all_dirty_from_scope)(t[40]),on);const o={};if(65536&n[0]&&(o.clipPath=t[16]),25165825&n[0]|512&n[1]&&(o.$$scope={dirty:n,ctx:t}),a.$set(o),M&&M.p&&(!w||512&n[1])&&(0,i.update_slot_base)(M,E,t,t[40],w?(0,i.get_slot_changes)(E,t[40],n,tn):(0,i.get_all_dirty_from_scope)(t[40]),en),4&n[0]&&j!==(j=t[2])){if(d){(0,i.group_outros)();const t=d;(0,i.transition_out)(t.$$.fragment,1,0,(()=>{(0,i.destroy_component)(t,1)})),(0,i.check_outros)()}j?(d=(0,i.construct_svelte_component)(j,P(t,n)),(0,i.create_component)(d.$$.fragment),(0,i.transition_in)(d.$$.fragment,1),(0,i.mount_component)(d,r,c)):d=null}else if(j){const e=1048576&n[0]?(0,i.get_spread_update)(L,[(0,i.get_spread_object)(t[20])]):{};d.$set(e)}const s={};32768&n[0]&&(s.width=t[15].width),32768&n[0]&&(s.height=t[15].height),32768&n[0]&&(s.border=t[15].border),98304&n[0]&&(s.clipPath=t[16]??t[15].borderRadius),m.$set(s),U&&U.p&&(!w||512&n[1])&&(0,i.update_slot_base)(U,R,t,t[40],w?(0,i.get_slot_changes)(R,t[40],n,Ge):(0,i.get_all_dirty_from_scope)(t[40]),We),t[14]?D?16384&n[0]&&(0,i.transition_in)(D,1):(D=ln(),D.c(),(0,i.transition_in)(D,1),D.m(e,null)):D&&((0,i.group_outros)(),(0,i.transition_out)(D,1,1,(()=>{D=null})),(0,i.check_outros)()),(0,i.set_dynamic_element_data)(t[0].tagName??"div")(e,q=(0,i.get_spread_update)(T,[(!w||1&n[0]&&_!==(_=t[0].type))&&{"data-item-type":_},(!w||1&n[0]&&g!==(g=t[0].id.slice(0,5)))&&{"data-item-id":g},(!w||1&n[0]&&h!==(h=t[0].parentId.slice(0,5)))&&{"data-parent-id":h},(!w||128&n[0]&&f!==(f=!!t[7]||void 0))&&{"data-mon-locked":f},(!w||1&n[0]&&b!==(b=t[0].id))&&{"data-mon-item-id":b},(!w||4096&n[0]&&y!==(y=t[12]||void 0))&&{"data-selectable-children":y},(!w||8192&n[0]&&v!==(v=t[13]||void 0))&&{"data-selectable":v},(!w||2080&n[0]&&$!==($=!t[11]&&!t[5]))&&{"aria-hidden":$},{class:"mondrian__item-2DsUh4"},{tabindex:"-1"}])),z&&(0,i.is_function)(z.update)&&129&n[0]&&z.update.call(null,{itemId:t[0].id,enabled:!t[7]}),x&&(0,i.is_function)(x.update)&&1&n[0]&&x.update.call(null,t[0]),(0,i.toggle_class)(e,"mondrian__--debug-3iu3YY",!1),(0,i.toggle_class)(e,"mondrian__--mon-dragging-2MbxPz",t[8]),(0,i.toggle_class)(e,"mondrian__--root-2EXV5y",t[1]),(0,i.toggle_class)(e,"mondrian__--hidden-3rqMFc",!t[11]),(0,i.toggle_class)(e,"mondrian__--selected-rQQEpt",t[5]),(0,i.toggle_class)(e,"mondrian__--dropping-into-2sPxJQ",t[9]),(0,i.toggle_class)(e,"mondrian__--hover-3A3TRM",t[6]),(0,i.toggle_class)(e,"mondrian__--preview-item-v3e-0e",t[4]),(0,i.toggle_class)(e,"mondrian__--clickable-3m9uUx",t[19]),(0,i.toggle_class)(e,"mondrian__--smooth-transitions-3JP837",t[29]),32768&n[0]&&(0,i.set_style)(e,"--mon-item-border-width",t[15].border.applied?`calc(${Zt(t[15].border.width)} / 2)`:"0"),268435456&n[0]&&(0,i.set_style)(e,"width",t[28]),134217728&n[0]&&(0,i.set_style)(e,"height",t[27]),4194304&n[0]&&(0,i.set_style)(e,"border-radius",t[22]),33554432&n[0]&&(0,i.set_style)(e,"top",t[25]),67108864&n[0]&&(0,i.set_style)(e,"left",t[26]),2097152&n[0]&&(0,i.set_style)(e,"z-index",t[21]),163840&n[0]&&C!==(C=`rotate(${t[17]}deg) scale(${t[15].flipX?-1:1}, ${t[15].flipY?-1:1})`)&&(0,i.set_style)(e,"transform",C)},i(t){w||((0,i.transition_in)(I,t),(0,i.transition_in)(a.$$.fragment,t),(0,i.transition_in)(M,t),d&&(0,i.transition_in)(d.$$.fragment,t),(0,i.transition_in)(m.$$.fragment,t),(0,i.transition_in)(U,t),(0,i.transition_in)(D),w=!0)},o(t){(0,i.transition_out)(I,t),(0,i.transition_out)(a.$$.fragment,t),(0,i.transition_out)(M,t),d&&(0,i.transition_out)(d.$$.fragment,t),(0,i.transition_out)(m.$$.fragment,t),(0,i.transition_out)(U,t),(0,i.transition_out)(D),w=!1},d(n){n&&(0,i.detach)(e),I&&I.d(n),(0,i.destroy_component)(a),M&&M.d(n),d&&(0,i.destroy_component)(d),(0,i.destroy_component)(m),U&&U.d(n),D&&D.d(),t[39](null),k=!1,(0,i.run_all)(A)}}}function cn(t){let e,n,o=t[0].tagName??"div",r=(t[0].tagName??"div")&&dn(t);return{c(){r&&r.c(),e=(0,i.empty)()},m(t,o){r&&r.m(t,o),(0,i.insert)(t,e,o),n=!0},p(t,n){t[0].tagName??"div"?o?(0,i.safe_not_equal)(o,t[0].tagName??"div")?(r.d(1),r=dn(t),o=t[0].tagName??"div",r.c(),r.m(e.parentNode,e)):r.p(t,n):(r=dn(t),o=t[0].tagName??"div",r.c(),r.m(e.parentNode,e)):o&&(r.d(1),r=null,o=t[0].tagName??"div")},i(t){n||((0,i.transition_in)(r,t),n=!0)},o(t){(0,i.transition_out)(r,t),n=!1},d(t){t&&(0,i.detach)(e),r&&r.d(t)}}}function mn({event:t}){return"click"===t}function un(t,e,n){let o,r,a,s,l,d,c,m,u,p,_,g,h,f,b,y,{$$slots:v={},$$scope:$}=e,{item:z}=e,{idx:k=0}=e,{isRoot:A=!1}=e,{ItemComponent:C}=e,{bindTriggers:S=(()=>{})}=e,{stateId:I}=e,{isPreviewItem:E=!1}=e,{isSelected:M=!1}=e,{isHovered:L=!1}=e,{isLocked:j=!1}=e,{isDragging:P=!1}=e,{isDroppingInto:R=!1}=e,{hoverItem:U=(()=>{})}=e,{visible:D}=e,{selectableChildren:T=!1}=e,{selectable:q=!1}=e,{isLoading:H=!1}=e;const N=(0,x.getContext)(w)??!1;return t.$$set=t=>{"item"in t&&n(0,z=t.item),"idx"in t&&n(30,k=t.idx),"isRoot"in t&&n(1,A=t.isRoot),"ItemComponent"in t&&n(2,C=t.ItemComponent),"bindTriggers"in t&&n(3,S=t.bindTriggers),"stateId"in t&&n(31,I=t.stateId),"isPreviewItem"in t&&n(4,E=t.isPreviewItem),"isSelected"in t&&n(5,M=t.isSelected),"isHovered"in t&&n(6,L=t.isHovered),"isLocked"in t&&n(7,j=t.isLocked),"isDragging"in t&&n(8,P=t.isDragging),"isDroppingInto"in t&&n(9,R=t.isDroppingInto),"hoverItem"in t&&n(10,U=t.hoverItem),"visible"in t&&n(11,D=t.visible),"selectableChildren"in t&&n(12,T=t.selectableChildren),"selectable"in t&&n(13,q=t.selectable),"isLoading"in t&&n(14,H=t.isLoading),"$$scope"in t&&n(40,$=t.$$scope)},t.$$.update=()=>{if(1&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(15,o=Ot(z,I)),1&t.$$.dirty[0]&&n(33,r=Ot(z,"default")),163840&t.$$.dirty[0]|2&t.$$.dirty[1]){const t=o.rotation??0;if(null==f)n(17,b=t);else if(t!==f){let e=t-f;e>180?e-=360:e<=-180&&(e+=360),n(17,b+=e)}n(32,f=t)}32768&t.$$.dirty[0]&&n(28,a=Zt(o.width)),32768&t.$$.dirty[0]&&n(27,s=Zt(o.height)),32768&t.$$.dirty[0]|4&t.$$.dirty[1]&&n(26,l=Zt({value:r.x.value+o.xOffset,unit:o.x.unit})),32768&t.$$.dirty[0]|4&t.$$.dirty[1]&&n(25,d=Zt({value:r.y.value+o.yOffset,unit:o.y.unit})),32768&t.$$.dirty[0]&&n(24,c=o.fill),32768&t.$$.dirty[0]&&n(23,m=o.overlay),32768&t.$$.dirty[0]&&n(16,u="clipPath"in o?o.clipPath:null),98304&t.$$.dirty[0]&&n(22,p=o.borderRadius.applied&&!u?[o.borderRadius.topLeft,o.borderRadius.topRight,o.borderRadius.bottomRight,o.borderRadius.bottomLeft].map(Zt).join(" "):void 0),1073741824&t.$$.dirty[0]&&n(21,_=9999-k),1&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(20,g=function(t,e){switch(t){case"text":case"shape":case"video":return{item:z,isPreviewItem:E,stateId:e};default:return{item:z}}}(z.type,I)),1&t.$$.dirty[0]&&n(19,h=z?.triggers.some(mn))},[z,A,C,S,E,M,L,j,P,R,U,D,T,q,H,o,u,b,y,h,g,_,p,m,c,d,l,s,a,N,k,I,f,r,v,function(e){i.bubble.call(this,t,e)},function(e){i.bubble.call(this,t,e)},function(e){i.bubble.call(this,t,e)},function(e){i.bubble.call(this,t,e)},function(t){i.binding_callbacks[t?"unshift":"push"]((()=>{y=t,n(18,y)}))},$]}class pn extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,un,cn,i.safe_not_equal,{item:0,idx:30,isRoot:1,ItemComponent:2,bindTriggers:3,stateId:31,isPreviewItem:4,isSelected:5,isHovered:6,isLocked:7,isDragging:8,isDroppingInto:9,hoverItem:10,visible:11,selectableChildren:12,selectable:13,isLoading:14},Je,[-1,-1])}}const _n=pn;function gn(t){(0,i.append_styles)(t,"svelte-1u2fjax",".mondrian__text-item-base-sapMUy{display:flex;flex-direction:column;height:100%;min-height:inherit;display:flex;justify-content:center;align-items:center}.mondrian__text-item-clip-boundary-1Hc9a4{width:100%;height:100%;position:relative}.mondrian__text-item-clip-boundary-1Hc9a4.mondrian__--ellipse-1UoVjA{width:calc(100% / sqrt(2));height:calc(100% / sqrt(2))}.mondrian__text-item-padding-boundary-Adxa0w{display:flex;flex-direction:column;position:absolute;inset:0}.mondrian__--padded-T3csuF.mondrian__text-item-padding-boundary-Adxa0w{inset:16px}.mondrian__--padded-T3csuF.mondrian__text-item-padding-boundary-Adxa0w.mondrian__--small-DRZmKr{left:8px;right:8px}.mondrian__--padded-T3csuF.mondrian__text-item-padding-boundary-Adxa0w.mondrian__--large-3Uzxk2{left:32px;right:32px}.mondrian__text-item-padding-boundary-Adxa0w[data-vertical-align='top']{justify-content:flex-start}.mondrian__text-item-padding-boundary-Adxa0w[data-vertical-align='middle']{justify-content:center}.mondrian__text-item-padding-boundary-Adxa0w[data-vertical-align='bottom']{justify-content:flex-end}.mondrian__text-item-base-sapMUy .tiptap{height:auto}")}const hn=t=>({item:1&t}),fn=t=>({item:t[0]});function bn(t){let e,n,o,r,a;const s=t[6].default,l=(0,i.create_slot)(s,t,t[5],fn);return{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),o=(0,i.element)("div"),l&&l.c(),(0,i.attr)(o,"class","mondrian__text-item-padding-boundary-Adxa0w"),(0,i.attr)(o,"data-vertical-align",r=t[1].textVerticalAlign),(0,i.toggle_class)(o,"mondrian__--small-DRZmKr",t[3]<=100),(0,i.toggle_class)(o,"mondrian__--large-3Uzxk2",t[3]>300),(0,i.toggle_class)(o,"mondrian__--padded-T3csuF","shape"===t[0].type),(0,i.attr)(n,"class","mondrian__text-item-clip-boundary-1Hc9a4"),(0,i.toggle_class)(n,"mondrian__--ellipse-1UoVjA",t[2]),(0,i.attr)(e,"class","mondrian__text-item-base-sapMUy")},m(t,r){(0,i.insert)(t,e,r),(0,i.append)(e,n),(0,i.append)(n,o),l&&l.m(o,null),a=!0},p(t,[e]){l&&l.p&&(!a||33&e)&&(0,i.update_slot_base)(l,s,t,t[5],a?(0,i.get_slot_changes)(s,t[5],e,hn):(0,i.get_all_dirty_from_scope)(t[5]),fn),(!a||2&e&&r!==(r=t[1].textVerticalAlign))&&(0,i.attr)(o,"data-vertical-align",r),(!a||8&e)&&(0,i.toggle_class)(o,"mondrian__--small-DRZmKr",t[3]<=100),(!a||8&e)&&(0,i.toggle_class)(o,"mondrian__--large-3Uzxk2",t[3]>300),(!a||1&e)&&(0,i.toggle_class)(o,"mondrian__--padded-T3csuF","shape"===t[0].type),(!a||4&e)&&(0,i.toggle_class)(n,"mondrian__--ellipse-1UoVjA",t[2])},i(t){a||((0,i.transition_in)(l,t),a=!0)},o(t){(0,i.transition_out)(l,t),a=!1},d(t){t&&(0,i.detach)(e),l&&l.d(t)}}}function yn(t,e,n){let i,o,r,{$$slots:a={},$$scope:s}=e,{item:l}=e,{stateId:d}=e;return t.$$set=t=>{"item"in t&&n(0,l=t.item),"stateId"in t&&n(4,d=t.stateId),"$$scope"in t&&n(5,s=t.$$scope)},t.$$.update=()=>{17&t.$$.dirty&&n(1,i=Ot(l,d)),2&t.$$.dirty&&n(3,o=i.width.value),2&t.$$.dirty&&n(2,r="clipPath"in i&&"ellipse"===i.clipPath)},[l,i,r,o,d,s,a]}class vn extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,yn,bn,i.safe_not_equal,{item:0,stateId:4},gn)}}const $n=vn;var zn=n(3948);function xn(t){(0,i.append_styles)(t,"svelte-mivwq4",".mondrian__content-h37oEP p:empty{min-height:1lh}")}function wn(t){let e,n;return e=new $n({props:{item:t[0],stateId:t[1],$$slots:{default:[kn]},$$scope:{ctx:t}}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};1&n&&(i.item=t[0]),2&n&&(i.stateId=t[1]),12&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function kn(t){let e,n,o=(0,zn.Z)(t[2],Pt)+"";return{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),(0,i.attr)(n,"class","tiptap ProseMirror mondrian__content-h37oEP"),(0,i.attr)(e,"class",En)},m(t,r){(0,i.insert)(t,e,r),(0,i.append)(e,n),n.innerHTML=o},p(t,e){4&e&&o!==(o=(0,zn.Z)(t[2],Pt)+"")&&(n.innerHTML=o)},d(t){t&&(0,i.detach)(e)}}}function An(t){let e,n,o=t[2]&&wn(t);return{c(){o&&o.c(),e=(0,i.empty)()},m(t,r){o&&o.m(t,r),(0,i.insert)(t,e,r),n=!0},p(t,[n]){t[2]?o?(o.p(t,n),4&n&&(0,i.transition_in)(o,1)):(o=wn(t),o.c(),(0,i.transition_in)(o,1),o.m(e.parentNode,e)):o&&((0,i.group_outros)(),(0,i.transition_out)(o,1,1,(()=>{o=null})),(0,i.check_outros)())},i(t){n||((0,i.transition_in)(o),n=!0)},o(t){(0,i.transition_out)(o),n=!1},d(t){t&&(0,i.detach)(e),o&&o.d(t)}}}function Cn(t,e,n){let{item:i}=e,{stateId:o}=e,{doc:r}=e;return t.$$set=t=>{"item"in t&&n(0,i=t.item),"stateId"in t&&n(1,o=t.stateId),"doc"in t&&n(2,r=t.doc)},[i,o,r]}class Sn extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Cn,An,i.safe_not_equal,{item:0,stateId:1,doc:2},xn)}}const In=Sn;i.SvelteComponent;const En=$.b;function Mn(t){(0,i.append_styles)(t,"svelte-1wojxzu","video.mondrian__mon-item-video-19vZAN{object-fit:cover;height:100%;width:100%}")}function Ln(t){let e,n;return{c(){e=(0,i.element)("video"),(0,i.attr)(e,"class","mondrian__mon-item-video-19vZAN"),(0,i.src_url_equal)(e.src,n=t[1])||(0,i.attr)(e,"src",n),e.controls=!0},m(t,n){(0,i.insert)(t,e,n)},p(t,o){2&o&&!(0,i.src_url_equal)(e.src,n=t[1])&&(0,i.attr)(e,"src",n)},d(t){t&&(0,i.detach)(e)}}}function jn(t){let e,n=t[0],o=Ln(t);return{c(){o.c(),e=(0,i.empty)()},m(t,n){o.m(t,n),(0,i.insert)(t,e,n)},p(t,[r]){1&r&&(0,i.safe_not_equal)(n,n=t[0])?(o.d(1),o=Ln(t),o.c(),o.m(e.parentNode,e)):o.p(t,r)},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e),o.d(t)}}}function Pn(t,e,n){let i,{item:o}=e,{stateId:r}=e;return t.$$set=t=>{"item"in t&&n(2,o=t.item),"stateId"in t&&n(0,r=t.stateId)},t.$$.update=()=>{if(5&t.$$.dirty){const t=(o.states[r].videoSources??o.states.default.videoSources).default,e=t&&o.assets?.[t];n(1,i=e?k(e):void 0)}},[r,i,o]}class Rn extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Pn,jn,i.safe_not_equal,{item:2,stateId:0},Mn)}}const Un=Rn;function Dn(t){let e,n;return e=new In({props:{doc:t[2],item:t[0],stateId:t[1]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,[n]){const i={};4&n&&(i.doc=t[2]),1&n&&(i.item=t[0]),2&n&&(i.stateId=t[1]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function Tn(t,e,n){let i,o,{item:r}=e,{stateId:a}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item),"stateId"in t&&n(1,a=t.stateId)},t.$$.update=()=>{3&t.$$.dirty&&n(3,i=Ot(r,a,["text"])),8&t.$$.dirty&&n(2,o=i?.text?.json)},[r,a,o,i]}class qn extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Tn,Dn,i.safe_not_equal,{item:0,stateId:1})}}const Hn=qn;function Nn(t){(0,i.append_styles)(t,"svelte-1vwx6yd",".mondrian__surface-3PSuzl{width:100%;position:relative}")}function Bn(t,e,n){const i=t.slice();return i[5]=e[n],i[7]=n,i}function Fn(t,e){let n,o,r,a;var s=e[0];function l(t,e){return{props:{idx:t[7],itemId:t[5].id}}}return s&&(o=(0,i.construct_svelte_component)(s,l(e))),{key:t,first:null,c(){n=(0,i.empty)(),o&&(0,i.create_component)(o.$$.fragment),r=(0,i.empty)(),this.first=n},m(t,e){(0,i.insert)(t,n,e),o&&(0,i.mount_component)(o,t,e),(0,i.insert)(t,r,e),a=!0},p(t,n){if(e=t,1&n&&s!==(s=e[0])){if(o){(0,i.group_outros)();const t=o;(0,i.transition_out)(t.$$.fragment,1,0,(()=>{(0,i.destroy_component)(t,1)})),(0,i.check_outros)()}s?(o=(0,i.construct_svelte_component)(s,l(e)),(0,i.create_component)(o.$$.fragment),(0,i.transition_in)(o.$$.fragment,1),(0,i.mount_component)(o,r.parentNode,r)):o=null}else if(s){const t={};2&n&&(t.idx=e[7]),2&n&&(t.itemId=e[5].id),o.$set(t)}},i(t){a||(o&&(0,i.transition_in)(o.$$.fragment,t),a=!0)},o(t){o&&(0,i.transition_out)(o.$$.fragment,t),a=!1},d(t){t&&((0,i.detach)(n),(0,i.detach)(r)),o&&(0,i.destroy_component)(o,t)}}}function Qn(t){let e,n,o=[],r=new Map,a=(0,i.ensure_array_like)(t[1].children??[]);const s=t=>t[5].id;for(let e=0;e<a.length;e+=1){let n=Bn(t,a,e),i=s(n);r.set(i,o[e]=Fn(i,n))}return{c(){e=(0,i.element)("div");for(let t=0;t<o.length;t+=1)o[t].c();(0,i.attr)(e,"class","mondrian__surface-3PSuzl")},m(t,r){(0,i.insert)(t,e,r);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);n=!0},p(t,[n]){3&n&&(a=(0,i.ensure_array_like)(t[1].children??[]),(0,i.group_outros)(),o=(0,i.update_keyed_each)(o,n,s,1,t,a,r,e,i.outro_and_destroy_block,Fn,null,Bn),(0,i.check_outros)())},i(t){if(!n){for(let t=0;t<a.length;t+=1)(0,i.transition_in)(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)(0,i.transition_out)(o[t]);n=!1},d(t){t&&(0,i.detach)(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Kn(t,e,n){let o,r,{item:a}=e,{Item:s=Wn}=e;const l=Ht.get(a.id);return(0,i.component_subscribe)(t,l,(t=>n(4,r=t))),t.$$set=t=>{"item"in t&&n(3,a=t.item),"Item"in t&&n(0,s=t.Item)},t.$$.update=()=>{24&t.$$.dirty&&n(1,o=a.states[r])},[s,o,l,a,r]}class Yn extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Kn,Qn,i.safe_not_equal,{item:3,Item:0},Nn)}}const Xn=Yn,Vn=(t,e)=>{function n(n,i={}){e.triggers.filter((t=>t.event===n)).forEach((n=>{!function(t,e,n){e.dispatchEvent(new CustomEvent("trigger",{detail:n,bubbles:!0}))}(0,t,{itemId:e.id,triggerId:n.id,...i})}))}const i=[...new Set(e.triggers.map((t=>t.event)))].map((e=>{if(e===Rt){let i=!1;return[Ft("mouseenter",t,(t=>{i||(i=!0,n(e,{hovered:i}))})),Ft("mouseleave",t,(t=>{i&&(i=!1,n(e,{hovered:i}))}))]}return Ft(e,t,(()=>{n(e)}))})).flat(2).filter(Boolean);return{destroy(){i.forEach((t=>{t()}))}}},On=function(){const t=(0,Tt.writable)({blockuments:{},items:{}}),{subscribe:e,set:n,update:i}=t,o=new Map;return{subscribe:e,set:n,update:i,addManifest:(t,e)=>{o.set(t,e),r()},removeManifest:t=>{o.delete(t),r()}};function r(){n(function(...t){const e={blockuments:{},items:{}};for(const n of t)Object.assign(e.blockuments,n.blockuments),Object.assign(e.items,n.items);return e}(...o.values()))}}();function Zn(t){let e,n;return e=new _n({props:{item:t[2],idx:t[0],isRoot:t[1],stateId:t[5],ItemComponent:t[4],bindTriggers:Vn,visible:t[6]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,[n]){const i={};4&n&&(i.item=t[2]),1&n&&(i.idx=t[0]),2&n&&(i.isRoot=t[1]),32&n&&(i.stateId=t[5]),16&n&&(i.ItemComponent=t[4]),64&n&&(i.visible=t[6]),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function Jn(t,e,n){let o,r,a,s,d,c,m=i.noop;(0,i.component_subscribe)(t,On,(t=>n(9,s=t))),t.$$.on_destroy.push((()=>m()));let{itemId:u}=e,{idx:p=0}=e,{isRoot:_=!1}=e;const g=Bt.get(u);return(0,i.component_subscribe)(t,g,(t=>n(6,c=t))),t.$$set=t=>{"itemId"in t&&n(8,u=t.itemId),"idx"in t&&n(0,p=t.idx),"isRoot"in t&&n(1,_=t.isRoot)},t.$$.update=()=>{768&t.$$.dirty&&n(2,o=s.items[u]),4&t.$$.dirty&&n(4,r=(t=>({image:l,text:Hn,group:Xn,shape:Hn,video:Un}[t.type]))(o)),4&t.$$.dirty&&(n(3,a=Ht.get(o.id)),m(),m=(0,i.subscribe)(a,(t=>n(5,d=t))))},[p,_,o,a,r,d,c,g,u,s]}class Gn extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,Jn,Zn,i.safe_not_equal,{itemId:8,idx:0,isRoot:1})}}const Wn=Gn,ti={[Ut](t,e,n,i){const o="self"===t.targetId?n:i[t.targetId];!1===e.hovered?Ht.get(o.id)?.revert(t.targetState):Ht.get(o.id)?.set(t.targetState)},[Dt](t,e,n,i){const o="self"===t.targetId?n:i[t.targetId];!1===e.hovered?Bt.get(o.id)?.set(!t.targetVisibility):Bt.get(o.id)?.set(t.targetVisibility)}},ei=(t,e)=>{const n=Ft("trigger",t,(t=>{const{itemId:n,triggerId:i,...o}=t.detail,r=e[n];if(!r)throw new Error(`Could not execute trigger ${i} on item ${n} because the item could not be found.`);const a=r.triggers.find((t=>t.id===i));if(!a)throw new Error(`Could not execute trigger ${i} on item ${n} because the trigger could not be found.`);const s=ti[a.action];if(!s)throw new Error(`Could not execute trigger ${i} on item ${n} because an appropriate handler for its '${a.action}' action could not be found.`);s(a,o,r,e)}));return{destroy(){n()}}};function ni(t){(0,i.append_styles)(t,"svelte-10n0or6",".mondrian__preview-1wBXnk{display:flex;justify-content:center;align-items:center;position:relative;z-index:0;width:100%;overflow:hidden}.mondrian__preview--empty-2zTzza{background-color:var(--art-color-neutral-050)}.mondrian__item-wrapper-1QM0jc{transform-origin:center;display:flex;justify-content:center;align-items:center;overflow:hidden}")}function ii(t){let e,n;return e=new ie({props:{items:t[9]}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p:i.noop,i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function oi(t){let e,n;return e=new Qe({props:{$$slots:{default:[ai]},$$scope:{ctx:t}}}),{c(){(0,i.create_component)(e.$$.fragment)},m(t,o){(0,i.mount_component)(e,t,o),n=!0},p(t,n){const i={};131116&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||((0,i.transition_in)(e.$$.fragment,t),n=!0)},o(t){(0,i.transition_out)(e.$$.fragment,t),n=!1},d(t){(0,i.destroy_component)(e,t)}}}function ri(t){let e,n,o,r;return{c(){e=(0,i.element)("div"),n=(0,i.text)("Block "),o=(0,i.text)(t[0]),r=(0,i.text)(" could not be loaded")},m(t,a){(0,i.insert)(t,e,a),(0,i.append)(e,n),(0,i.append)(e,o),(0,i.append)(e,r)},p(t,e){1&e&&(0,i.set_data)(o,t[0])},i:i.noop,o:i.noop,d(t){t&&(0,i.detach)(e)}}}function ai(t){let e,n,o,r,a,s,l;return o=new Wn({props:{itemId:t[16].id,isRoot:!0}}),{c(){e=(0,i.element)("div"),n=(0,i.element)("div"),(0,i.create_component)(o.$$.fragment),(0,i.attr)(n,"class","mondrian__item-wrapper-1QM0jc"),(0,i.attr)(e,"class","mondrian__preview-1wBXnk"),(0,i.toggle_class)(e,"mondrian__preview--empty-2zTzza",t[5])},m(d,c){(0,i.insert)(d,e,c),(0,i.append)(e,n),(0,i.mount_component)(o,n,null),t[11](n),t[12](e),a=!0,s||(l=(0,i.action_destroyer)(r=ei.call(null,e,t[7])),s=!0)},p(t,n){(!a||32&n)&&(0,i.toggle_class)(e,"mondrian__preview--empty-2zTzza",t[5])},i(t){a||((0,i.transition_in)(o.$$.fragment,t),a=!0)},o(t){(0,i.transition_out)(o.$$.fragment,t),a=!1},d(n){n&&(0,i.detach)(e),(0,i.destroy_component)(o),t[11](null),t[12](null),s=!1,l()}}}function si(t){let e,n,o,r,a,s=t[1]&&ii(t);const l=[ri,oi],d=[];function c(t,e){return 1===e?function(t){const e=t.slice(),n=e[7][e[8]];return e[16]=n,e}(t):t}return n=function(t,e){return void 0===t[6]||void 0===t[8]?0:1}(t),o=d[n]=l[n](c(t,n)),{c(){s&&s.c(),e=(0,i.space)(),o.c(),r=(0,i.empty)()},m(t,o){s&&s.m(t,o),(0,i.insert)(t,e,o),d[n].m(t,o),(0,i.insert)(t,r,o),a=!0},p(t,[r]){t[1]?s?(s.p(t,r),2&r&&(0,i.transition_in)(s,1)):(s=ii(t),s.c(),(0,i.transition_in)(s,1),s.m(e.parentNode,e)):s&&((0,i.group_outros)(),(0,i.transition_out)(s,1,1,(()=>{s=null})),(0,i.check_outros)()),o.p(c(t,n),r)},i(t){a||((0,i.transition_in)(s),(0,i.transition_in)(o),a=!0)},o(t){(0,i.transition_out)(s),(0,i.transition_out)(o),a=!1},d(t){t&&((0,i.detach)(e),(0,i.detach)(r)),s&&s.d(t),d[n].d(t)}}}function li(t,e,n){let o,r,a,s=i.noop;t.$$.on_destroy.push((()=>s()));let{manifest:l}=e,{blockumentId:d}=e,{prefetch:c=!0}=e;(0,x.setContext)(w,!0);const m=Symbol("LearnComponent"),u=l.blockuments?.[d],p=function(t,e){const n=structuredClone(t.items)??{};for(const t in n)n[t].blockumentId!==e&&delete n[t];return n}(l,d),_=u?.children[0]?.id,g=Object.values(p);let h,f;return On.addManifest(m,l),g.forEach((t=>{Ht.add(t.id,(0,Tt.readable)(t.initialState)),Bt.add(t.id,(0,Tt.readable)(t.initialVisible))})),(0,x.onMount)((()=>{Ht.resetAll(),Bt.resetAll();const t=new ResizeObserver((()=>{h&&f&&function(){if(!(_&&h&&f&&a))return;const t=p[_],{width:e,height:i}=Ot(t,a,["width","height"]),o=h.offsetWidth,r=Math.min(1,o/e.value);n(3,f.style.transform=`scale(${r})`,f),n(2,h.style.height=i.value*r+"px",h)}()}));return h&&t.observe(h),()=>{t.disconnect()}})),(0,x.onDestroy)((()=>{On.removeManifest(m)})),t.$$set=t=>{"manifest"in t&&n(10,l=t.manifest),"blockumentId"in t&&n(0,d=t.blockumentId),"prefetch"in t&&n(1,c=t.prefetch)},n(5,o=1===Object.keys(p).length),n(4,r=_?Ht.get(_):void 0),s(),s=(0,i.subscribe)(r,(t=>n(13,a=t))),[d,c,h,f,r,o,u,p,_,g,l,function(t){i.binding_callbacks[t?"unshift":"push"]((()=>{f=t,n(3,f)}))},function(t){i.binding_callbacks[t?"unshift":"push"]((()=>{h=t,n(2,h)}))}]}class di extends i.SvelteComponent{constructor(t){super(),(0,i.init)(this,t,li,si,i.safe_not_equal,{manifest:10,blockumentId:0,prefetch:1},ni)}}const ci=di;var mi=n(2834),ui=n.n(mi);const pi=((t,e={width:"100%"},n="div")=>i=>{const o=(0,mi.useRef)(null),r=(0,mi.useRef)(null),[a,s]=(0,mi.useState)(!1);return(0,mi.useEffect)((()=>{const e=/on([A-Z]{1,}[a-zA-Z]*)/,n=/watch([A-Z]{1,}[a-zA-Z]*)/;r.current=new t({target:o.current,props:i});const a=[];for(const t in i){const o=t.match(e),s=t.match(n);null!=o&&"function"==typeof i[t]&&r.current.$on(`${o[1][0].toLowerCase()}${o[1].slice(1)}`,i[t]),null!=s&&"function"==typeof i[t]&&a.push([`${s[1][0].toLowerCase()}${s[1].slice(1)}`,i[t]])}if(a.length>0){const t=r.current.$$.update;r.current.$$.update=function(){a.forEach((([t,e])=>{if(null!==r.current){const n=r.current.$$.props[t];e(r.current.$$.ctx[n])}})),t.apply(null)}}return()=>{null!==r.current&&r.current.$destroy()}}),[i]),(0,mi.useEffect)((()=>{a?null!==r.current&&r.current.$set(i):s(!0)}),[i,a]),ui().createElement(n,{ref:o,style:e})})(ci),_i=t=>{const{manifest:e,...n}=t,i=(0,mi.useMemo)((()=>{const t=_t.safeParse(e);if(t.success)return t.data}),[e]);return i?ui().createElement(pi,{manifest:i,...n}):null}}}]);